---------------------

* = 보류
// = 해결
\\ = 확인/테스트 필요

$ = 빠른 시일내에 수정 필요
% = 팀원들에게 수정 요청

---------------------

[일반버그]

1. 좀비를 2번 죽일시 -HP 값 발생 후 시체를 밟고 움직일 수 있는 버그 발생 (레그돌(물리충돌)은 그대로 가능한 상태)
// 2. 아이템 드랍후 다시 주울때 빈 아이템 생성됨
// 3. 좀비를 타격시 비정상적으로 날라가는 버그 (그냥 부딪힐 때도 가끔 날라감)
// => 메시 콜리전 프리셋을 'NoCollison'으로 바꾸면 안 날라감 -> 근데 그럼 피격 체크가 가능한가..?
// ==> 좀비 메시 콜리전 프리셋을 바꾸지 않고 플레이어 메시 콜리전 프리셋을 'NoCollison'으로 바꿈 
// (그래도 좀비에게 피격은 당함 -> 캡슐 컴포넌트로 검사해서)
// 4. 좀비 패스파인딩 버그 (벽을 잘 못 돌아감)
// 5. 첫 점프를 하고 나서 스태미나 회복 X (달리기는 잘 됨)
6. 인벤토리 관련 버그들
	// - 빈화면 오른쪽 클릭시 인벤에 있는 아이템 무작위로 착용/해제 됨
	// - 아이템 드래그해서 버릴때 인벤에 닫혀있는 칸으로 드래그해서 버리면 해당칸 검은색에서 흰색으로 변함 (실제로 빈칸이 되지는 않음)
	// - 아이템 드래그해서 버릴때 빈화면에서 움직이면 인벤에 있는 아이템들 무작위로 같이 버려짐
	// => 영상 찍어 확인해보니 일단 착용 칸 위에서 움직이면, 착용칸에 착용돼있는 아이템 위로 드래그 하면 인벤에 있는 해당 아이템이 같이 뭉쳐져서 드래그 드랍됨

	*** - 아이템 드래그해서 버릴때 드래그 클릭 풀때 그 위치에서 버려지는게 아니라 드래그를 한 시점의 위치에서 버려짐 
	(그래서 드래그를 하고 윗층으로 가서 버린다해도 아래층에 버려짐)
	(* 사실, 드래그해서 자기 칸 밖에 끌어다가 놓는 순간 바로 실제 월드 아이템은 해당 위치에서 버려짐)
	[+] 여러개 묶어서 버릴때는 어떤지 확인해보기 => 마찬가지로 드래그해서 뭉치고 뭉친 상태에서 해당 자신의 칸 넘어가면 그자리에서 바로 월드 드랍

	// - 인벤토리 제한 넘어서 획득 가능
// - 무기 아이템 착용이 착용 칸에 제대로 표시가 안되는 버그 -> 다른 아이템을 장비하게 되면 리프레쉬되서 나타남

*** 7. 좀비 되살아나고 사람과 충돌체크가 안되는 버그 

\\ -> 콜리전 설정 업데이트 해줬었는데 확인은 그 이후로 딱히 안 해봄 (부활을 정지시켜 놓고 있었어서)

---------------------

[아이템 사용 관련 버그들]

// 1. 드링킹 아이템 2번이상 사용시 버그 (따닥 사용 가능)
// 2. 참치캔 사용시 크래쉬

$$ ***** 3. 드링킹 아이템들 손에 들때 모두 음료수 캔으로 보임 
					(뿐만 아니라 출혈 회복 아이템들도 알맞게 수정 필요)
$$ => 아이템들 마다 사용시 다른 애니메이션 필요 ("담배", 과자, 참치캔, (소독약, 연고))
===> 은근 시간 많이 걸리는 작업이니 나중에 시간이 남으면 하자

// 4. {?} 출혈 회복용 아이템은 체력이 만땅일때 사용 -> 좀비 한마리 스폰시켜 확인 필요
// 5. 드링킹 아이템을 모두 소진시 다시 3번을 누를 시 크래쉬
// 6. 힐링 아이템 사용도중 아이템 줍기를 하면 애니메이션 캔슬 버그 (이렇게되면 아이템 효과가 바로 시전됨)
// 7. 체력회복 아이템을 한번만 사용했지만 자동으로 두번째로도 사용이 되는 버그 (두번째 이펙트는 그래서 무한 플레이됨 - 실제 회복은 X)
// 8. 체력회복 아이템이 사용되는 도주 강제로 한 번더 사용되어 이펙트가 무한 플레이되는 버그
// 10. 무기를 모두 사용해서 파괴된 후 다시 무기창으로(1번 클릭) 이동할 시에 크래쉬되는 버그 
// 11. 아이템 소진후 다시 해당 아이템 핫키로 이동시 QuickHItem/QuickNWeapon에서 크래쉬 발생

12. 체력 회복 도중 좀비에게 피격 당하면 아이템 사용이 멈추는 버그 
(체력 회복은 멈추고 이펙트는 계속 재생, 프로그래스 바도 정지, 따라서 새로 아이템 사용 X)
=> 다시 현재 버전에서 테스트 해봤는데 고쳐진거 같음 (어떻게 고쳐진지는 기억 안나는데...) 
\\ ***** -> 그래도 더 테스트/확인 필요!

// 13. 후라이팬 충돌체크 안 됨!
// => 박스 컴포넌트 위치 수정함 -> 잘 되나 확인 필요
// 14. 지상 2층에서 얻는 빨간 자동차키 인벤토리에서 무기칸에 끼워짐;;
 
+ 체력 회복템 사용도중 피격 당할시 취소/중지를 할지 말지 회의

// + 출혈 아이템도 아이템별 사용시간 변동 (오염된 옷 = 3초, 옷 = 3.5초, 거즈 = 5초, 붕대 = 5.5초)

---------------------

[키 사용]

// 1. 키 사용 애니메이션 필요
// 2. 키 사용 (8초) 이후 열쇠 열리도록 수정 필요 - 지금은 사용하면 바로 풀림
// => 8초는 너무 길어서 5.23초(문열기 애니메이션 재생시간)으로 맞춤
// -> 근데 지금은 정확히 몇초지? -> 애니메이션 재생 시간은 5초 정도임 (프로그래스 바도 같이 맞춤)
// => 근데 이전에 키 사용하면 바로 열렸는데 지금은 아닌 거 같아 보이긴 한데, 그래도 한번 테스트 해보기 => ㅇㅇ 5초 후에 다 열고 탈출함
// -> 미리 2명 차에 모아 놓고 키 사용해보기 -> 바로 엔딩신 잘 나옴
***** => 대신 엔딩존 체크가 클라가 플레이어 패킷을 보내줘야 체크함(아무나 상관없이) -> ProcessPacket에 플레이어 패킷을 받는 쪽에서 검사해서 (tick마다 검사하기엔 부하가 커보여서;;)

*** 3. 키 사용 중 피격시 프로그래스 바도 중지되는 기능 필요 (중지되면 프로그래스 바도 다시 숨겨야함) -> 이거 회의하고 넣을 지 말지 결정!

// 4. 키 사용 도중에는 움직이지 못하게 해야함
// => 추가했는데 tick에서 검사하다 보니까 약간의 딜레이가 있는거 같음 (프로그래스 바가 끝나고 5초 정도 뒤에야 다시 움직여짐)
// => 그리고, 점프는 가능함
// 5. 키로 문을 열고 나서 프로그래스 바 숨겨야함 (일단 바로 게임 오버되긴 하지만...)

---------------------

[AI관련]

// 1. 좀비 패트롤 점이 장애물 안쪽을 찍어서 좀비가 장애물에 끼는 버그
// 2. 목표지점 처음은 잘가지만 두번째 지정해준 목표지점을 주면 움직임이 멈추는 버그
// 3. 클라 좀비 new Rotation FVector{0.f,0.f,0.f}로 잘 설정했지만 해당 Rotation 벡터가 잘못되었다고 언리얼 강제 종료시키는 버그
// 4. 좀비 시야 검사에서 Send Dectect 패킷을 전송할때 좀비의 인덱스가 순차적이지 않다면 vector out of range 크래쉬가 발생
// (예를 들어 1 2 4 5 이런식으로 좀비 인덱스가 설정되면 무조건 크래쉬 발생)
// (인덱스 0번 꼭 사용해야 함 - 그냥 12345 이런식으로 하면 무조건 크래쉬 발생, 근데 01234 이런식으로 하면 해당 크래쉬는 발생 않하지만 
// 5번 문제로 0번 좀비는 작동이 안됨) => (12345 이렇게 했을때 크래쉬 발생시키는 건 5번! [즉, 맨 마지막 인덱스를 할당 받은 좀비, 나머지 좀비는 문제 없는 듯하다])
// 5. 좀비든 플레이어든 0번 인덱스를 설정하면 오류, 작동이 안되는 버그
// 6. 언리얼 에디터에서 플레이 중지를 하면 크래쉬 발생 (서버는 계속 켜진 상태에서) -> 에러 메세지는 정확히 뭔지 모르겠음
// + 마찬가지로 언리얼 에디터에서 플레이를 중지하고 다시 접속을 시도하면 서버-클라(언리얼) 모두 크래쉬 발생
// + 플레이어 두명 접속이 그래서 안됨!!
// -> 서버는 abort(), 클라는 PlayerController.cpp 에서 좀비 위치 갱신해주는 코드에서 NULL 주소 참조 에러 메세지 띄움
// 7. 가끔씩 서버에서 또 vector out of range 크래쉬 발생 -> 크래쉬 메세지 창 뜨고 나서 BT 완전 정지됨
// => [일종의 데이터 레이스 문제] MoveTo에 path 벡터에서 발생하는 문제라서 TimerThread에서 부르던 걸 좀비 BT 쓰레드로 옮기니 문제는 해결 됨
// 다만, 좀비 BT 작동 인터벌 사이에 MoveTo가 작동을 이제 안하게 되니 path의 중간 노드(방향 전환 하는 지점)에서 경로를 벗어나서 움직임을 계산 할 오류 있으니 해당 오류 수정 필요
// 8. 몇몇 좀비들 어느 순간 부터 움직임이 아예 멈춤 -> 벽이나 장애물에 낀 거 같음 (그 근처에서 멈춤)
// => 이전 A* 버그 그대로 남아 있는 듯 함
// 9. ZombieSpawnData recv가 지금 안 될때가 있음 (좀비 스폰이 안됨) -> Recv Error 띄움 -> 로그 보면 좀비 이동 위치를 받는데 스폰을 안 시킴, 에러 메세지도 한참뒤에 나옴
// 10. OneGameModeBase.cpp 에서 네비메쉬 정보 저장하는 코드 남아 있던데 이거 삭제? -> 언리얼 킬때마다 파일 저장 코드 돌아가는 거 같음
// -> 일단 주석처리
// 11. 좀비 많이 스폰시키면 시간이 좀 지나고 어느 순간에 갑자기 언리얼이 플레이 중지됨 (한 8~7분쯤) (크래쉬는 아님) (내 컴퓨터 사양 문제일 수도..)
// 언리얼 크래쉬도 날 때 있는데 에러 메세지 아래와 같음 (블루 스크린도 떴었음...;;)
// => "LogAudioMixer: Warning: AudioMixerPlatformInterface Timeout [ 5 Seconds] waiting for h/w. InstanceID=1"

// 12. 좀비끼리 충돌체크 안 되고 있음 -> 뭉쳐짐
// => 일단 좀비끼리는 충돌체크를 하지 않도록 하자!
***** => 대신 좀비가 뮤탈 뭉치기 처럼 하나로 보이게 되서 이거 어떻게 해야 할 지 생각 필요...
$$ => 좀비가 서있는 위치 실시간으로 추적해서 장애물로 판단하고 피하기

// 13. 좀비가 플레이어를 따라갈 때 플레이어가 이동하면 좀비는 움직임이 멈춤
// 14. 좀비 아예 맵 밖으로 나가는 버그 있음;;; (화장실 뒤쪽으로 나감)
// -> 일단 패트롤에서 예외처리
// -> A* 테스트를 위해서라도 현재 네비메쉬 맵을 수정할 필요가 있어보임 (맵 자체를 바꾸지 말고 맵 저장용으로 수정하고 찍고 원래대로)
// -> 추가로 현재 맵이 너무 어두우니 조명 좀 큰거 달기
// => 지하 1층만 좀 수정 -> 장애물 위치를 수정해서 Nav 메쉬 찍는 점 정중앙에 위치하도록 해서 장애물 위치 Nav 메쉬가 잘 체크할 수 있게
// => 얇은 장애물 (지상1층 선반 등)들 아직 통과해서 지나감;;; -> 더 여유롭게 설정해야 할 듯
// 15. 플레이어가 강제 종료 될 시에 서버가 조금 딜레이 후에 해당 플레이어가 접속이 끊김을 알게됨 
// -> 만약 서버에서 어느 한 플레이어를 지정해서 해당 플레이어를 기준으로 작업을 하는게 있다면 문제가 생길 수 있음 
// (아래 ToDo 리스트에 적힌 11번에 좀비 hp 관리와 같은 경우)
// => 그래서 owner(호스트) 클라가 연결이 잠깐 끊기면 (핑 패킷 1~3번은 그냥 무시하지만 5번 이상부터는) 디스컨넥트 프로그레스 바 띄우고 전체 클라 잠시 대기하도록 
// => 그냥 Owner 클라 없앰 -> 좀비가 개별적으로 송수신 처리하게 바꿈 (detect 처럼)
// 16. (클라) 플레이어가 쉬프트만 눌러도 Run 패킷을 보냄 -> 플레이어가 실제로 움직였을때가 아니라
// => 쉬프트를 누른뒤 (뛰기 모드 ON) 실제로 움직여 뛰기 시작하면 Run 패킷 보내도록 수정 
// 17. 플레이어가 피격 당해도 피격 당한 후 움직여야지 그때 플레이어 피격 사실을 서버에서 정보를 받음 (피격 당한 시점에 패킷 보내는 거 추가하기)
// 18. 에디터에서 플레이어 여러명 스폰 시켜서 돌려보면 에디터의 플레이어(1번)만 좀비가 보이고 나머지 클라 화면에서는 좀비가 안 보임...
// -> 지금 이렇게 테스트 하면 좀비가 여러명 포착하면 제대로 여러명 포착함을 서버에 알려줄 수 있나?
//    -> if (Char->GetPlayerId() == 99) 일 때만 Detect 검사를 시행해서 에디터에서 여러 클라 돌리면 결국 1번만 검사하는 거 같음;;
//    => 빌드해서 테스트, 확인 필요
// 19. 서버에서 Detect 관련해서 데이터 레이스 생길 우려 있음 (좀비 쓰레드-통신 쓰레드 간에 데이터 레이스)
// -> 송수신 쓰레드에서 클라로부터 Detect 패킷을 수신 받으면 IOCP_CORE 클래스 변수 zombie 벡터에 접근하는데, 이는 다른 쓰레드에서 돌아가는 BT에서도 접근하기 때문에;;
// -> 사실 Detect 뿐만 아니라 Attack이나 다른 송수신 쓰레드와 BT 쓰레드에서 같이 접근하는 변수들에서 모두 데이터 레이스 발생 가능함
// => BT 시작 전에 송수신 쓰레드와 별개로 BT 쓰레드 내에 지역/클래스 변수 하나 만들어서 거기에 Data Race 발생하는 변수 값 할당 받아서 그 변수으로 BT 검사하기
// 20. 속도 빠른 좀비는 고개 돌리기가 부자연스러움 (고개를 자꾸 좌우로 흔듦)
// 21. 클라 PlayerCharacterController.cpp에서 로그 찍는 얘들 거의 recvPlayerData.PlayerId 를 출력해서 모두 0으로 나옴
// => GameInstance->ClientSocketPtr->GetMyPlayerId() 로 출력해야함
// 22. 죽은 플레이어 시체를 계속 좀비가 공격하는 버그
// 23. 샤우팅 좀비 1마리만 스폰 할 시에 애니메이션이 이상하게 작동하는 버그 (아이들-걷기 애니메이션 스위칭 무한 반복 -> 이전에 고친 버근데;;)
// -> 어차피 2마리 이상 스폰시킬 꺼긴 하니까 상관안해도 되는데;;
// => 이전 코드 주석 처리 안해서 발생했던거임;;
// [+] 샤우팅 좀비 그냥 자체적으로도 걷는게 어색해보이긴 함

24. 전반적으로 좀비가 부자연스럽게 움직임
// => 충돌체크 설정 바꿔보기
// => 고개 돌리기 고치기
// => moveto 수정하기
** => 좀비 움직임 동기화 방식 다시 생각해보기 
-> 아예 플레이어처럼 그냥 딜레이 없이 보내게 할까? (그래서, 플레이어 움직임은 부드러움)
-> 대신 BT에서 시간이 많이 소요되는 pathfinder를 쓸때는 서로 간격(딜레이)를 주어서 부하를 낮추고 
(예를 들어, 한번 pathfinder를 돌리면, 그다음 pathfinder는 약 0.3초 뒤에 다시 하도록? 대신 좀비가 그 시간동안 좀 멍청해 보일지 모르지만...)

// 25. BT 작은 오작동 버그들 수정하기
// -> 공격 후 정상적으로 안 움직이고 자꾸 같은 장소 왔다 갔다하는 버그
// -> 왜 서버 bt코드에서 새로운 패트롤 플래그 값을 false로 고정하면 도착하고 멈추는게 아니라 특정 두지점을 계속 왔다갔다 하지?
// => 좀비가 일정구간을 왔다갔다하는데, 목표 지점은 고정인데 목표지점을 도달 못하는 거 같음 (도착 로그가 안 뜸)
// => 아니 도달은 하는데 해당 도착지점에서 왜 멈추지 않고 다른 지점을 이동해서 다시 움직임;;; (새로운 패트롤을 다시 지정 안해주는데)
// => 도착 지점 체크가 제대로 안되고 있었음;; (zombieidx 로만 체크하면 안되고 위치로 체크해야했음)
// -> 잠만 코드 보니까 좀비 detect에서 하위 task(sequence) 실행 도중에 상위 task가 검출되면, 하위 플래그값 초기화 안해주는 거 같은데? 
// => ㅇㅇ 맞음 초기화 작업 필요함
// => ReachFinalDestination에서 모든 플래그값 한번에 초기화 하게 작업함 (도착지점에 도착시에)
// => 혹시 더 있나 확인해야함!
// => [+] 좀비 여러명 포착하고 가장 가까운 플레이어를 우선적으로 따라가게 만든거 잘 기능하나 테스트 필요!
// - 좀비 장애물에 끼어서 계속 정지하는 버그 있음
// - 좀비 스폰되고 나서 제자리에 가만히 서있는 버그 있음
// - 좀비 플레이어를 시야에서 놓치고 나서 해당 자리에서 근처만 계속 왔다 갔다만하는 버그 있음
// - 좀비 벽/구석에 붙어 가만히 서있을 때 많음
// - 좀비 계단 쪽 넘어로 이동하려고 하는 거 자체를 막기 (TargetLocation이 일정범위를 넘으면 그냥 리셋하고 패트롤하게)
// => MoveTo에서 다음 목적지가 계단 너머라면 ReachFinalDestination 해서 리셋 시킴
// 26. 지하 2층에 구석 한자리에 (0,0,0) 좌표에 T자 자세 취하는 좀비 뭐지..?
// => 이전 절단에서 쓰던 절차적 메쉬에 필요한 좀비임 
// 27. 지하 2층 같은 경우 차들이 랜덤으로 스폰되기 때문에 nav 맵을 저장하기가 까다롭다...
// -> 차를 먼저 스폰하고 맵을 저장 시키면 될 것 같긴한데...
// => 자동차는 스폰 위치가 고정이라 (키 위치만 랜덤), 차 스폰 먼저 시키고 다시 네비메쉬 찍음
// 28. 샤우팅 좀비 샤우팅 할때 가끔 Niagara 쪽에서 잘못된 메모리 참조 크래쉬 발생할 때 있음
// 29. 좀비 사망 후 시체 상태에서 여전히 움직이는 버그 
// -> 클라에서 좀비 hp 동기화가 이상하게 되고 있음 (서버에서는 아직 피가 남아있는데, 클라에서는 그보다 더 빨리 비정상적으로 피가 닳음)
// -> 그래서 서버에서는 여전히 BT는 돌아가서 시체가 움직이고 공격까지 함
// 30. 'DistanceTo_PlayerInSight is empty' 에러 메세지 계속 뜨는거 조사하기
// => 일단 크게 문제는 안 일으키는 거 같아서 주석처리함... (첨에는 데이터 레이스 문제인줄 알았는데 데이터 레이스는 다 방지해놓아서 해당 문제는 아님)
// => DistanceTo 맵들과 PlayerInSight/FootSound 플래그 값들 초기화 문제였음 (=> 애초에 뜨면 안되는 에러메세지였는데, 이제는 해결한듯)
// ===> 그래도 더 지켜보기

---------------------

[AI관련 ToDo]

// 1. 좀비 Detect 지금 기능 안되고 있음
// => 기능은 되는 것 같은데, 문제는 플레이어를 포착하고 길을 잘 못찾는 경우가 있어, 플레이어가 가만히 있어도 플레이어를 놓치는 경우가 생김
// 2. 좀비 Attack 하고 결과 반영 => 플레이어 죽으면 다른 플레이어도 해당 플레이어 죽음 확인 
// -> 캐릭터 송수신 패킷에 이미 플레이어 hp 보내고 있음
// 근데 죽는 애니메이션이 잘 안되는 것 같다고 얘기했음 => 확인 필요! => 잘 안됨!! 죽음 애니메이션 클라 동기화작업 따로 필요!
// => 만약 죽는 캐릭터가 죽을 때 움직이는 도중이였으면 죽는 애니메이션 재생됨! -> nono 그냥 소방관이 담배사하면 애니메이션 재생되는 거 였음
// 3. 서버 좀비 도착지점에 도착하면 도착했다고 로그 쭉 연속으로 찍는거 문제 확인하기 
//	=> SendFinalDesti... 함수가 MoveTo에서 불려서 쓰레드 도는 속도만큼 계속나옴
// 4. 좀비 고개 돌리기
// 5. 서버 좀비BT에서 좀비 로케이션 보내는거 갱신 받기
// 6. 가끔 클라에서 좀비 path 받는 부분에서 NULL 주소 참조 에러 뜸
// 7. 좀비 죽고 나서는 움직이지 않게 수정 ( + 심지어 공격도 함;;)
// 8. 좀비 공격 중에는 이동 멈추기 구현 - 클라, 서버 둘다 구현해야함
// 9. 좀비 시야각 만들어 주기
// 10. 위 [AI관련] 7번 문제에서 MoveTo 함수 수정 필요 
// -> 일단 보류: 지금 BT 자체가 0.1초 텀이여서 1초에 200/300/400을 이동하는 좀비는 결국 현재 우리가 사용중인 네비메쉬의 점사이 간격인 100/50을 넘지 못함 (각 텀마다 20/30/40 이동함)
// 11. 좀비 피격 후 좀비 HP 서버-각 클라들 동기화 작업 ( + 좀비 피격 애니메이션 )
// -> 궁금한 점: 다른 플레이어가 좀비 공격하면 여러 클라가 다 공격하게 되서 여러번 좀비 피를 깎지는 않는지 확인 
// -> 직접 때린 클라만 해당 좀비 hp 동기화 패킷을 서버로 전송하게 만듦
// 12. 좀비 맵정보 다들 다 따로 Load 하지 말고 (파일 불러오기) 전역 변수 하나 만들어서 거기에서 한번만 로드하고 해당변수 이용하기
// 13. 좀비 패트롤은 굳이 리소스 많이 사용하는 A* 쓰지 말고 그냥 간단하게 주변 움직이게 바꾸기
// -> 좀비 40마리 모두 스폰시켜서 테스트 해보기! => 큰 문제(렉)는 없는데 최적화가 그래도 필요해보임(좀비 약간 버벅임) => 랜덤 패트롤 A* 안쓰는 방향으로
// => 테스트 해본 결과 전----혀 문제 없음 (로컬/원격 모두 테스트해봄 - 한 층에 40마리 스폰)
// 14. 좀비 피격시에도 움직임 멈추기 (일종의 경직)
// 15. 좀비 공격시에 플레이어가 이동하면 이동하는 방향으로 몸 틀기
// 16. 좀비 걷는 애니메이션 약아악간 끊기는게 보임 -> 보간 필요해보임 => 0.3초 이상 제자리면 그때 idle 재생
// 17. 좀비 애니메이션 재생 후 이동시에 약간씩 순간이동하는 버그 => 일단 수정했지만 아직 그래도 약간 버벅임 (순간이동은 안함 그래도)
// 18. BT 작동 인터벌 설정	-> 너무 짧게하면 플레이어 따라올 시 플레이어가 이동하면 좀비가 멈추고, 너무 길게하면 뚝뚝 끊임 => MoveTo에 시간 계산 deltaTime으로 변경해서 해결
// 19. 좀비 가끔씩 랜덤 패트롤을 찍을 때 계속 경로를 못 찾아서 "[Error] No path found."  "랜덤 패트롤 지정 실패! 다시 검색!!!" 만 계속 나옴
// -> 이거 이 상태에서는 해당 CheckPath함수가 무한루프 돌기때문에 전체 좀비 BT 멈추니 예외처리를 해줘야함 (몇번만 시도해라 등등)
// 20. FootSound 작업
// 21. 러닝 좀비 구현
// 22. 샤우팅 좀비 구현
// 23. 샤우팅 좀비 샤우팅 할때 플레이어를 바라보고 샤우팅하게
// 샤우팅 고개 돌리기 -> detect 플레이어 인덱스 정보 가지고 있나? => LastSeenPlayer
// => 잘되긴 하는데 다른 클라가 볼때는 LastSeenPlayer가 아직 초기화 안되서 그냥 정면을 바라보게 나오긴 함
// => 샤우팅 동기화 작업 만들어줘서 플레이어 아이디 같이 전송받아 (Zombie_Attack 패킷처럼) 해당 플레이어를 바라보도록 고개 돌리기도 동기화

---------------------

[좀비 슬라이스]

// 1. 러닝 좀비 슬라이스시 머테리얼 설정이 러닝 좀비만 조금 달라서 메시 적용이 달라 텍스쳐 깨질 때가 있음
// => 수동으로 메시 설정해서 해결함
// -> 그래도 아주 레어하게 머리 끝부분만 자르면 메시 어긋 날 때 있음;; (이때는 메시 엘레멘트 수가 3이나오는데 순서가 꼬임 (0번자리에 머리카락이고 1번은 body_M이 되야함))
// -> 머리 끝부분만 자를때 말고도 그냥 많이 어긋남;;; 메시 설정이 그냥 너무 안좋은 에셋
// 2. 잘리는 부위 크기가 작으면 weight가 (자동설정됨) 같이 작아서 impulse가 너무 커서 너무 날라가는 (맵 뚫고) 문제 있음
// => weight에 따라 impulse도 자동으로 조절하도록 바꾸기
// *** => random impulse를 줄 수도 있긴 하지만, 그러면 서버와 동기화 작업이 늘어나서;;
// 3. 잘리는 면이 가끔 생성이 제대로 안될 때 있음 (투명한 부분이 생김) -> 어느 좀비 상관 없이 (착각 했던거 같음;; 그 이후로 한번도 못봄)
// 4. 잘린 부위가 컨벡스가 설정이 안되어서 공중에 떠있을 때 있음 -> 그래서 weight도 0임 (대부분 조금 자를 때 발생)
***** => 공중에 뜨는 건 방지 했는데, 지금 컨벡스가 생성 안 된 메시는 수동으로 바운딩 박스 생성하게 했는데 잘린 부위가 너어무 얇으면 
해당 바운딩 박스도 쥐꼬리 만큼 생성되는 거 같음. 그래서 바닥을 뚫고 심연으로 떨어짐.
$$$$$  ***** => 최소 바운딩 박스 크기를 설정해줘야 할 것 같음
$$$ *** 5. 잘린 면이 너무 회전이 오래 지속되는 거 같음;; (특히 작게 잘렸을때)

***** [+] 잘리면 좀비 시체가 날라가는게 사실 조금 어색함;
-> 혹시 스켈레톤 메시에도 슬라이스가 적용되는지 보고 가능하다면 애니메이션 재생시켜보기
(예를 들어, 팔이나 머리 일부분이 잘린다면 몸체는 죽는 애니메이션 재생시키기 (절단 부위는 그대로 날리면서))  

---------------------

[이펙트]

***** [+] 피 이펙트 벽이나 바닥에 부딪히면 데칼(피 묻히기) 만들어보기
// [+] 힐링 이펙트 생성 위치 조금 수정하기
* [+] 지금 피, 샤우팅 이펙트 EndPlay 시기가 애니메이션이랑 붙어있는데, 이거 일정시간 후에 없애든가 벽에 부딪히면 없애게 수정하기
-> 지금 이펙트들 모두 벽, 바닥 뚫고 지나감;;
[+] 샤우팅, 힐링 클래스의  RootComponent로 빈 메시가 정해져 있는데 이거 빈 메시 보다는 실제로 메모리 사용하는 다른 걸로 바꾸기
***** [+] 지혈 성공 이펙트, 무기가 깨질때 이펙트, 좀비가 플레이어 발소리 또는 샤우팅 소리에 어그로가 끌렸을때 (머리 위에 띠링 같은) 이펙트, 
담배 필 때 연기 이펙트 
***** [+] 피 이펙트 너무 대놓고 원뿔 형태로 흩뿌려져서 어색함 -> 바꾸자
$$$$ ***** [+] 다양한 인게임 플레이어 스크린 이펙트 
-> hp가 적을때, 출혈 상태일때, 담배 필요할때, (* 샤우팅 좀비 샤우팅 들으면 화면 일그러지는 효과), 스태미나가 다 닳았을때

---------------------

[서버-클라 동기화 버그]

// [+] 다른 플레이어가 아이템들 떨구면 해당 아이템 동기화되는지 확인 (바닥에 생성되는지 다른 플레이어들도 보이는지)
$$$ ***** [+] 타이머(게임 시간) 동기화 -> 로딩화면에서 인게임 넘어갈때 타이밍을 똑같이 맞춰주면 타이머를 실시간으로 동기화 할 필요X

$$$ ***** [+] 로딩창에서 인게임 넘어갈때 각 클라들 모두 같이 넘어가게 (서버에서 각 클라 로딩확인 작업 필요) => 타이머 동기화도 그럼 같이 해결됨
$$ ***** [++] 로딩창 프로그래스 바 실제로 작동하게 만들기 
-> 클라에서는 에셋 로딩 끝나면 플레그 바꿔서 +40%, 좀비, 아이템 서버로 정보 받으면 +20% 이런식으로 만들기

---------------------


<추가 고려사항들>

// [+] 왼쪽 화장실 중앙에 안보이는 벽이 있어서 플레이어 이동 막음;;

* [+] 좀비에게 코너에 몰리면 빠져 나갈 수가 없음;; 좀비가 안 밀림
// => 플레이어와 좀비는 충돌체크를 해제? (x) -> 다시 설정 
* -> 대신 밀치기 만드는거 고려해보기
//    => 추가로 바닥에 떨어진 아이템과도 충돌체크 해제

// [+] 로딩 스크린 만들기 
***** -> 좀비 스폰, 플레이어 스폰, 아이템 스폰, 네비메쉬 맵 읽기 등등 체크

// [+] 최적화 작업 => <서버> 플레이어가 존재하는 층만 좀비 BT 돌리기, <클라> 마찬가지로 내가 있는 층만 좀비, 플레이어 객체 작동하게(Tick 돌리기) 
// <서버> 플레이어가 존재하는 층만 좀비 BT 돌리기 -> 이거 안되어 있는거 같음
//[+] 좀비 BT 타게팅 관련
// => 좀비 발소리 듣고 발소리 지점 다 도착 후 만약 이전에 플레이어를 본적이 있다면 그럼 다시 그 쪽으로 이동? 아님 그냥 리셋하고 패트롤?
// => 혹은 샤우팅과 발소리 모두 들었다면 이때는 처리 어떻게? (지금은 샤우팅이 우선 순위이긴 함)
// => 무조건 우선순위 실행시키고 (만약 다른 후순위 task를 진행중이라면 overwrite하기) 리셋시키기로, 그래서 해당 task 끝나면 초기상태에서 다시 bt 실행
// [+] 좀비 시야각 만들어 줘서 플레이어가 좀비 옆으로 빠르게 지나가 시야에서 벗어나면 좀비가 플레이어를 놓칠 수 있음 (->약간 바보처럼 보임)
// => 근데 아마 발소리 듣게 만들어주면 플레이어가 빠르게 지나가도 그때 발소리를 듣고 그쪽으로 고개를 돌리게 되면 다시 괜찮게 보일 수 있을 것 같음
// [+] 네비메쉬 간격 설정 변경으로 인한 성능 차이
//	  간격 (100) 1마리 - 0.001초 / 40 - 0.04 -> 틀릴 수 있음 (디버깅 deltaTime 최소 관측 가능한 시간이 1ms(0.001s)라서)
//    간격 (50)  1마리 - 0.002초 / 40 - 0.08
//	  => Node (정점)은 약 4배 증가함

[+] 공격 메카니즘 수정
*** -> 한번에 공격에 여러 좀비 한번에 같이 타격 가능하게? -> 좀비가 잘 뭉치기 때문에 필요해 보임
* => 어차피 n번 절단하려면 좀비 타격 충돌체크 방식을 아예 고쳐야 하니 나중에 그때 같이 고치는 걸로

***** [+] 무기들 마다 특징 더 추가해주기? 
(타격 무기는 좀 더 여러 좀비를 때릴 수 있고 (날붙이 무기는 한마리씩) 도끼처럼 데미지 쏀거는 스윙 애니메이션 좀 느리게 등등)

// [+] 게임 헬퍼/도우미 추가 (테스크 박스, 메세지 창...)
// -> 폰트는 나중에 찾아서 알맞는거 넣기
// [+] 동료 캐릭터 UI에 표시하기

%% ***** [+] 인게임 채팅기능

* [+] 밀치기 기능
* [+] 컷신 (게임 시작시, 게임 엔딩시)
* [+] 캐릭터 사망 후에 다른 플레이어 관전 할 수 있는 팔로우 캠 만들기

// [+] 로딩창/전환 화면 만들기
// [+] 플레쉬 라이트 및 전반적인 맵 조명 수정
// [+] 카메라 위치 수정
// [+] Nav 액터 이제 지워도 되나? -> 이제 안쓰니까 삭제함
// [+] 클라이언트 쪽 최적화 
// => 먼저 호스트 클라 없애기 -> 일단 좀비 체력 깍는거만 담당하는데, 해당 방식 바꾸기 (좀비가 보내는게 아니라 무기가 보내게)
// -> 이렇게 되면 호스트 클라 없애기 때문에, 목적지 path가 (0,0,0) 인 좀비들 렌더링X, tick 연산X, 물리 연산X 해서 최적화 가능
// (서버에서 같은 층에 있는 좀비만 path 보내고 있어 다른 층 좀비는 path가 (0,0,0)이 됨)


<게임 사운드>
 * 플레이어 - 발소리(특히 뛸때), ((캐릭터마다 다르게)*공격 신음소리, *피격당했을때 신음소리, *죽었을때), (점프할때), *붕대, *드링크 먹는 소리, (스태미나 다 사용시 헉헉->스태미나 바를 깜박이게)
  *[+] 소방관 담배 필요 알림메세지 나올때 효과음
 * 무기 - 휘두를 때 소리, 피격 했을때 *(무기마다 다른 소리나게), 무기 내구도 다 닳았을때
 * 아이템 - 주웠을때 / (키 사용 소리) / *아이템 떨굴때 소리
 * 좀비 - 공격할때, 피격 당했을때, 죽을때, (샤우팅), 플레이어 발견시 소리내기, (부활할때), *절단되고 바닥에 나뒹구는 소리
 * 시스템 - *로비에서 버튼음, *화면 전환 효과음, 인벤토리 열고 닫을때 효과음, 중요아이템 획득시 효과음, 알람음, *게임 클리어시 엔딩컷 만든다면 (못 만들더라도) 차/헬기 탈출 소리
 * 배경음 - *로비 화면 배경음, *대기실 배경음, *메인 게임 배경음
 
 
// <엔딩 점수판>
// 1. 탈출 방법
// 2. 탈출 시간
// 3. 탈출한 사람 / 사망한 사람
// 4. 탈출시 사용한 열쇠 찾은 사람 (탈출문 연 사람 - 혹시 열쇠를 양도 받을 수 있으니) 
// 5. 좀비 킬 수 (개인 좀비 킬수 / 제일 많이 좀비 죽인 사람- 킬수) 


<패키징하다 발견한 버그들>

// [+] 캐릭터 죽어도 움직여짐
// -> 이젠 안나오는데, 그때 패키징 문제였던거 같은데 확실하진 않음 
// -> 아니 아직 가능함;; 랜덤인듯
// -> 아이템 사용도 다 가능함 (키 사용까지도)
// => 소방관 캐릭 '담배사'하면 해당 버그들 가능함!!
// [+] 캐릭터가 안 죽을 때도 있음
// -> 뒤늦게 죽거나 아예 안 죽음 (이상한건 UI에는 죽은게 표기됨)
// -> 그래도 내 화면 앞에서 바로 직접 죽는 걸 보면 정상적으로 애니메이션 나오는 거 같음 (->아님 랜덤임;;)
// [+] 캐릭터 선택창 뒤에 배경 빈공간 있음
// 캐릭터 움직임 (애니메이션) 자체가 약간의 렉 (딜레이) 있음
// => 이거 좀비 ai 서버로 옮길 때도 발생했던 유사한 문제인데 -> 애니메이션 전환시에 약간의 전환시 딜레이/보간(0.3초)을 하여 고침
// => 쿨타임 적용해서 해결 (0.3초)

***** [+] 캐릭터 점프 애니메이션 동기화 안됨 -> 캐릭터 애니메이션 블루프린트 수정이 필요함
// [+] 좀비 죽음 동기화 안됨 -> 좀비가 해당 플레이어가 없던 위치(층)에 있을때 죽으면 다시 그 층에 갔을때 마지막으로 본 위치에 가만히 서있음
// => 고쳐 진것 같기도하고 한데 한번더 확인해보기

// [+] 각목 충돌체크 안됨
// [+] 핑 연결 끊김 너무 자주 생김 - 15초로 설정했지만 다시 연결이 되어도 해당 카운터를 초기화(다시 0으로)를 잘 못하는 거 같음
// =====> 이거 deltaTime을 GameTimer에 누적시킬때 deltaTime이 너무 빨리 실행되면 부동소수점 오류가 누적되며 시간이 훨씬 더 빨리 측정됨
// => 일단 지금 핑 체크 끄긴함 ===> 사실 에디터 플레이 중지 때문에 넣은 기능이라 이제 필요 없을뜻
// [+] 좀비 스폰 수 절반으로 줄이기
// [+] 좀비 죽으면 동기화 일단은 지금은 안되니까 대충 잘리게 만들기
// -> 동기화 작업 해야됨!!!

$$$$$ ***** [+] 좀비 슬라이스 동기화 문제 -> 애니메이션 프레임도 맞춰줘야 완전히 똑같이 잘림
***** =====> 이거 애니메이션 프레임 맞추려면 각 주요 뼈들의 트랜스폼을 전송해야 하는데 (통신 데이터 크기 최적화) 여기서 루트본이 필요하다고함
=> 근데 좀비는 루트본이 없는 상태...

// [+] 좀비 죽일때 => 동기화 피 생성 안됨 (임시 코드 - 절단은 안돼도 애니메이션과 피 생성은 만들어 놨는데...)
// => 로그 찍어서 보니까 다른 클라 플레이어들의 무기들 충돌체크(WeaponBeginOverlap)가 돌아가는 중이네..? -> X onegamemode에서 돌아갔던게 있었음
// => 내가 혹시 해서 '나 자신 플레이어만 검사' 하도록 if (OwnerCharacter->GetPlayerId() != 99) return 코드 넣었는데 작동 X (로그도 안 찍히네??)
// => 이상한건 1번 클라로 하면 해당 버그 발생하고 2번으로 하면 또 괜춘함 (두번의 검사 모두 에디터에서 확인 & 두 클라 모두 로컬)
// [+] 네비 맵 수정 -> 다시 확인해보기

* [+] 게임 종료 후 게임 종료시키는 버튼 추가하기 (또는 재시작 기능 구현하기(?))

// [+] 캐릭 선택화면에서 플레이어 이름 & 초상화 바껴서 나올때 가끔 있음
// -> 방에 들어간 순서가 중요한 거 같음
// [+] 엔딩씬에서 킬 수가 안 맞음 (0으로 나옴)
// [+] 랜덤하게 아이템, 좀비 스폰 안될때 있음
// (사실 플레이어도 스폰 안 될때 있는데 해당 플레이어가 움직이면 이제 패킷을 다시 보내게 되서 만약 해당 플레이어가 생성 안됬어도 움직이면 다시 
// 패킷 전송받아서 생성이 됨) -> 서버 상태가 안 좋을 수록 더 확연히 발생함
// [+] 아이템 줍기도 동기화 안될 때 있음 (될때도 있고 안 될때도 있음)
// => 패키징 하면 생기는 문제!!! (에디터는 괜춘) -> 아예 delete item 패킷을 서버로 안보내는 거 같음
// => 다만 키는 에디터에서도 먹어도 안 사라짐 (키를 먹고 서버로 해당키를 먹었다는 걸 알려주는 코드가 아이템 삭제 알려주는 코드랑 꼬인거 같음)
//  [+] 키 아이템 줍고 UI, 미션창 동기화 X (로컬로하면 될때도 있고 안될때도 있음)
// => 해당 버그 클라에서 서버로 아이템 삭제 패킷 전송 할 때 UI 업데이트 패킷이랑 아이템 삭제 패킷이랑 데이터 레이스 발생해서 생기는 문제같음
// => 이제는 더이상 발생 아예 안하는지 지켜보기
// [+] 이미지들 지금 로딩 안됨 -> 캐릭터 초상화, 아이템 초상화 => 패키징 폴더 직접 지정으로 해결 
// (동적으로 생성하는 액터의 경우 패키징이 빠질 수 있다함)
// [+] 인게임 들어가면 fatal error 뜨고 크래쉬 => 힐링 이펙트 tick에서 메모리 초기화 (참조 오류) 안한 객체 사용 있었음
// -> 근데, 왜 패키징에서 인게임 들어가자말자 자동으로 (0,0,0)좌표에서 힐링 이펙트가 생성이 되지..?
// => 캐릭터 생성자에서 힐링 이펙트를 CreateDefaultSubobject로 하위 객체 초기화를 해주고 있는데, 이러니 패키징에서 생성했던거였음 (딱히 필요도 X)

★☆★☆★☆★☆ 에디터에서는 보이지 않는 문제들 패키징에서는 나타 날 수 있으니 반드시 중간중간에 패키징 테스트를 진행하자!!! ★☆★☆★☆★☆

[+] 레디 창에서 먼저 들어간 플레이어가 먼저 레디 누르면 다음 플레이어 해당 플레이어 레디 먼저 누른거 안보임
=> 이제는 해당 방에 플레이어가 모두 레디 누르면 바로 시작이라, 이걸 볼려면 두명 이상 방에서 한명만 레디 누르고 있어야함
%%%% ***** ===> 이거 보니까 SC_JoinPlayer 패킷에 레디 정보는 안 담고 보내고 있어서 그런거 같은데, 레디 정보만 패킷에 추가해주면 될 듯

// [+] 다른 층에서 다른 플레이어가 좀비 죽이면 나중에 해당 층가서 해당 좀비 보면 죽은 위치가 이상함 (생성위치에서 죽어 있음)

// [+] 10분 다지나면 게임 실패 띄우기
$ ***** => 정확한 10분은 아님 (다들 로딩 시간이 다르고 서버 타이머는 그냥 제일빨리 접속한 플레이어 기준으로 시간을 측정해서..)
$ => 게임시간 동기화 필요!

%%% ***** [+] 클라 (로비/게임)서버랑 연결 안돼 있으면 에러 메세지 띄우기 -> 윈도우 에러 메세지 띄우는게 가능한가? (['에러'] ip 서버 - ??? 에 연결 할 수 없습니다. <'확인'>)

// [+] 패키징에서 좀비 슬라이스 될 때와 안 될 때가 있음 (대부분 안됨) - 디버그 드로우 라인해서 보면 이상한 위치에 찍힘
// -> 이전 무기의 플레인 정보를 받아오는 코드가 패키징에서는 정상 작동 안되는 거 같음 (각 꼭짓점의 인덱스들 안에 값들이 이상함)
// [+] 어웨이(원격)로 클라 2명 실행하면 2번째 플레이어는 인게임 접속이 안됨 (인게임으로 넘어갈 때 크래쉬(배열 인덱스 잘못된 참조) 발생함)
// [+] 회사원 스태미나 좀 늘려주기 (속도는 젤 느린데 스테미너는 똑같아서(스테미나는 다들 똑같음) 너무 답답함;;)
// => 30% 올려줌 (100->130)
// => 스태미나 바가 오류 있음
// [+] 로비 채팅 입력칸 글자 색 바꾸기
// [+] 미션 완료 할때 텍스트 투명화하게 하지 말고 체크 표시를 띄우던가 색깔을 바꿔서 강조하기
// [+] 좀비 애니메이션 아직 안고쳐진 거 같음;; -> 코드 보니까 idle 애니메이션 전환 자체를 안함 
// -> 고치긴 했는데 지금 좀비 moveto가 이상해서 도착지점에 가만히 멈추질 않음 
// (그래도, 따로 서버 콘솔창을 클릭해서 BT 스레드 잠시 멈추게해서 정지하는 애니메이션으로 바뀌는 건 확인함)
// [+] 클라 config.txt랑 서버에서 users.txt gitignore 설정하기 (이름도 좀 바꾸고)
// [+] 안 쓰는 프로젝트나 폴더 삭제 좀 하기;;
// [+] 캐릭 선택창에 간단하게 캐릭 특징 띄우기?
//		여학생: 체력 낮음, 근력 매우낮음 / 스피드 아주 빠름, 스테미나 많음
// 		아이돌: 출혈확률 높음 / 출혈 회복 아이템\n 높은확률로 다시 사용가능
// 		소방관: 담배를 주기적으로 피워줘야 함 / 체력 높음, 근력 매우 높음
// 		회사원: 스피드 느림 / 빠른 문열기,\n 시작아이템 서류가방 제공(인벤토리+5) 
// [+] 캐릭들 장점 추가 => 
//	회사원: 문열기 행동 빠름(약 100%), 인벤 크기 10칸으로 시작(시작할때 서류 가방을 인벤에 가지고 시작)
// ===> 회사원 시작템 서류가방 BeginPlay에서 생성하게 하긴 했는데, 첨에는 인벤에서 안 보임(따른 아이템 먹으면 그때야 보임) -> 있기는 있음 아이콘이 안 보일 뿐 사용도 가능
// BeginPlay에 GameUIUpdate 넣어줘서 해결
//	/ 아이돌: 출혈 회복 아이템 (높은)일정확률로 다시 사용가능 (40%)
// [+] 아이돌 출혈 회복 아이템 재사용 갸차 성공했을때 작게 성공 메세지 띄우기! (줄넘김 넣었는데 잘 나오는지 확인)
// ===> 메세지 뜨는 거랑 아이템은 안 줄어들게 한거는 잘되는데, 출혈이 안 멈춤 / 지혈만 성공하는 경우(아이템은 사용되고)에는 출혈 잘 멈춤
// [+] 아이돌 캐릭 알고보니까 출혈확률 더 높게 설정하는게 안 돼있음 (+20%[기존:30%])
//	/ 여학생: 스테미나 +40%, 스테미나 회복 속도 +10% 
//	/ 소방관: 담배로 얻는 체력회복 버프 +160% (+ 금연 타이머 대신 1분으로 더 너프)
// -> (+ 메탈 슬러그처럼 캐릭 한명당 하나씩만 선택가능하게(중복 캐릭선택 못하게))
// ==> 데이터 레이스 생길 수도 있긴한데 (크래쉬는 안 날꺼임) 확인 필요 (정보 처리하는게 tick이라서 동시에 누르면, 한 캐릭 둘이상이 선택 가능할 꺼임)
// ===> 만약 이것도 방지해서 완전히 중복 캐릭 선택 못하게 막으려면 (클라에서) 레디 누를때 중복 캐릭터가 있는지 검사하고 있으면 에러 메세지 띄우면 됨
// *** ======> 계속 시도해봤는데 발생 안 하는 거 같음 (아님 아아아아아주 적은 확률로 가능하던가 0.000001초 단위로 같은 순간에 누르면?)
// [+] 타격 무기(날붙이X) 좀비 죽일때 피 생성 안됨
// [+] 인벤 창도 퀵슬롯에서 아이템 장비하는 키(단축키) 같이 띄워서 알려주면 좋을듯 (인벤 창 여는 버튼도 뭐인지 미리 알려주면 좋을 듯)
// [+] 플레이어 사망 후에도 캡슐 바운딩 박스가 켜져있음 (투명벽)
// - 플레이어 죽을때 애니메이션 재생 안되고 바운딩 박스도 그대로 남는거 
// -> 이거 다른 클라에서는 TakeDamage->PlayDead가 실행 안돼서 생기는 문제인데, 그럼 어디에서 다른 플레이어들의 피가 닳면 0이하인지 검사해서
// 해당 작업을 시켜줄 수 있는 장소가 이미 있나? 
// => 그냥 BaseCharacter Tick에서 검사해서 PlayDead 부름

// [+] 플레이어 수 상관 없이 게임 시작 가능하게 바꾸기
%%%%% \\\\\ ***** -> 플레이어 4명으로 해도 잘 되는지 테스트 필요!!!

// [+] 사망한/접속이 끊긴 플레이어가 있다면 해당 플레이어는 빼고 모였을때 엔딩 볼 수 있도록 수정하기
// => 사망한 플레이어는 체크해서 빼줌 (이미 되어 있음) / 접속 끊긴건 체크 안 하고 있음! (탈출 영영 불가! - 죽지도 못함: 좀비가 연결 끊긴 플레이어는 무시해서)
// [+] 플레이어 사망하면 띄우는 메세지 계속 띄워 놓기 그냥 (유다희 처럼)

*** [+] 메인 메뉴 타이틀 폰트 바꿔주기

*** [+] 힐링 아이템 이전 아이템 사용 쿨타임으로 사용 못 할 경우 알림 메세지 띄우기

// [+] 가끔 어떤 플레이어는 아이템을 바닥에 떨구면 바닥에 남지 않고 걍 사라짐;;(자기 화면에서도 안 보임) (아이템 떨구기 동기화 작업도 필요하긴 함)
// -> 이거 0번 클라가 떨구면 항상 1번 플레이어 위치에 떨궈짐 (서버-클라 다 로컬로 해서 문제인지는 봐야함)
// => 로컬로 2개하면 고쳐진거 같긴한데 원격으로도 테스트 해보기
$$ ***** [+] => 관련해서 키도 떨구거나 하면 동기화 되도록 수정?

// [+] 회복 아이템 사용후 회복 도중에 남아있는 해당 아이템 바닥에 떨구면 크래쉬 발생 -> 패키징에서만 발생하는 문제!
// [+] 잉? 이젠 그냥 아이템 떨구면 크래쉬 발생함! (로컬은 문제 없는데 어웨이(원격)으로 하면 발생! "array idx 메모리 참조 에러 띄움")
// [+] 전처리기 디렉티브(preprocessor directives)/ 전처리기 플래그 사용해서 서버 주석 스마트하게 관리하도록 바꾸기

$$ ***** [+] 레디 창에서 레디 누르고 back 했다가 다시 들어가면 이미 ready 상태임 (화면상으로는 ready가 안보이는데 내부적으로는 이미 ready인 상태임)

// [+] 가끔 공격할 때 분명 한번 공격 했는데 좀비가 피격을 두번 당한거 처럼 리액션 할 때있음 (근데 피는 안튀고 체력도 그렇다고 2번 깎이는 건 아닌 거 같음)
// -> 이거 혹시 급하게 중간 데모용으로 피 튀는 거 구현한 부분 때문?

$$ ***** [+] 옥상키 하나만 먹었는데 UI는 둘다 먹었다고 지워 질때 있음
$$ ***** -> 키 하나 먹고 떨궈서 다시 주웠을때

// ***** [+] 키 들고 있을때 손에 키 줘고 있는게 보이게 하기 
// -> 키가 워낙 작다보니, 추가로 아이콘을 띄워주거나 키를 들때는 스텐스를 바꾸던가 해서 표시나게
// ===> 아님 담배 처럼 아이콘을 띄워서 표시를 하던가

// [+] 갑자기 플레이어 피 달때 있음 (맵에 좀비들을 다른 플레이어가 이미 다 죽였는데 어떻해???!!!!)
// -> 이상한게 출혈 회복 템이 사용 가능하지도 않음 (출혈 상태이지 않을때만 막아놨는데)
// => 좀비 스폰 아예 안하고 테스트 한 번 해보기
// => 그냥 0번 플레이어가 7분대 쯤에 아무 이유없이 피가 달기 시작함 (좀비 다 죽임, 맞은 적 없음, 좀비 있는 층에 있지도 않음)
// ======> 버그 아님!!!! 소방관 캐릭이라 담배 안피워서 피가 닳았던거임 ㅋㅋㅋㅋ
// => 그래도 상태 이상 띄워주기!!!

*** [+] 플레이어 연결 끊기면 해당 플레이어 객체 삭제(화면에서 없애기?)하기? 
***** => 캐릭 머리위에 연결 끊김 아이콘 띄우거나, 옆에 초상화 위에 연결 끊김 아이콘 띄우면 좋을듯
$$$ =====> 걍 연결 끊기면 그 자리에서 바로 해당 캐릭 죽이기

\\ [+] 좀비 BT 연결 끊긴 플레이어만 해당 층에 있어도 돌아감 -> 이거 고칠까요? (어차피 연결 끊긴 플레이어는 BT(Detect) 검사는 제외라서;;)

// [+] 캐릭터 출혈 상태이면 해당 상태를 알려주는 기능 넣기 => 아이콘 & 메세지

*** [+] 좀비 벽을 뚫을 수 있음 -> 상황: 플레이어가 선반 위에 올라가면 좀비는 선반 앞 유효한 네비메시 점까지 가고 그다음 플레이어 위치까지 
움직일 수 있도록 코드가 구현되어 (유효한 점이 아니더라도) 벽을 뚫는 상황이 나옴

// [+] 헬기 떠나고 옥상 키먹으면 실패 뜨는데 밑에서 해당 작업 완료 텍스트가 다시 나타남. 
// -> 그리고 옥상키 다 먹으면 실패가 성공으로 바뀌고 알림도 뜸;;
// (+ 그리고 그냥 '실패'라고 띄우기 보다는 '옥상 탈출 실패' 이렇게 띄우는 게 좋을 것 같음 
// => [새로 발견된 버그] 5분 03초 정도에 두번째 옥상 열쇠를 먹으면 미션창에 해당 오류 생김
***** -> 그리고 해당 방식의 탈출은 타임이 정해진 것도 알려주면 좋을 듯)

// [+] 10분 지나도 제대로 안꺼질 때 있음 (좀 지났다가 꺼짐, 아님 한 쪽 클라는 꺼지고 나머지는 안 꺼짐)
// => 그리고 그냥 꺼지는 것 보단 게임 오버 띄우기?
// => 플레이어들 모두 죽어도 게임오버 점수판 띄우기
// ==> 10분이 다 지나거나 플레이어들 모두 사망하면 점수판 띄우게하는 패킷 전송하도록 서버 작업도 필요함

// [+] 옥상 키 5분 지나도 사용 가능 & 나갈 수도 있음 (엔딩나옴)
***** => 5분 지나면 키사용은 막히는데 미리 열어두면 나갈 수 있음 (수정필요)

// [+] 붕대 아이템 손에 쥐고 있는 상태 동기화 문제 있음 (계속 장비하고 있는 걸 보임 - 무기랑 같이 들고 있고 그럼)

[+] 캐릭 선택 창에서 캐릭 선택 버튼 가끔씩 한번에 입력 안될때 있음

// [+] 캐릭 선택 창에서 레디 취소하고 다시 캐릭 선택할 수 있게하는 기능
// [+] 아이템 줍는 거리가 좀 엄청남 (키 사용도 마찬가지)
// [+] 잉 로컬로 2개 했을때 2번 클라에서 크래시 발생 -> 1번 클라가 그저 좀비에게 피격 당했을 때 
// -> 원격으로 2개 돌리면 안 생기는 버그인지 확인 필요
// => BaseCharacter 출혈 이상 메세지를 띄우는 부분에서 메모리 참조 오류 문제 였음;
// [+] 현재 캐릭터들 이름 설정이 좀 이상함 -> 모델이랑 이름가 좀 안 맞는 거 같음 
// (아이돌은 먼가 좀 이상하고, 소방관은 공사장 인부 작업복입고 있고, 회사원은 employee보다는 business man이 더 맞을 것 같음...)
// => 그냥 캐릭들 이름을 지어줄까? --> (Girl: Connie, Idol: Quincy, FireFighter: Kenny, Employee: Jason)
// [+] 출혈 지속 시간 끝나면 아이콘도 같이 없애주기 (지혈 회복 안했더라도)
// 궁금한점 -> 출혈 효과 시간 다 지나면 출혈상태 공격력 낮아지는거 이거도 안 사라지나..?
// 만약 그렇게 한다면 아이콘 없앨 필요는 없어보이는데 그럼 출혈 효과 날때랑 끝났을 때 아이콘 표시를 좀 다르게 해야할 것 같음 
// (예를 들어 출혈 주이면 깜빡이게, 출혈 효과 끝나면 그냥 띄우고 -> 추가로 출혈 중이면 메세지로 피가 단다고 알려주고 공격력도 낫아지는 걸 알려주는게 좋을 듯) 
// => 근데, 원래는 지혈 안하면 출혈 계속 되게 했었음!!! -> 그런데! 회복아이템(지혈템 X) 먹으면 출혈이 멈추는 거 같음! ====> 고침!!

$$ ***** [+] 지혈 애니메이션 바꾸기 (지금은 카드 나눠주는 애니메이션임...)
$$ =====> 마켓에서 애니메이션 찾아서 (무료 없는 거 같으니 유로라도) 사용하자 
===> 시간 은근 잡아먹는 작업이니 그냥 나중에 시간남으면 하자;;;

$ *** [+] 지혈 성공하면 이펙트도 띄우기? (새로운 거 만들어서? -> 회복 이펙트 색깔만 바꿔서 써도 괜춘 할 뜻)

$ ***** [+] 전체적인 캐릭터 애니메이션 동기화 빠진 부분들 수정 -> 지혈, 키 사용, 회복 아이템 사용, /*아이템 줍기*/, 담배 피우기
$ ***** => 해당 애니메이션들을 재생 시키라는 네트워크 작업이 필요하긴 할 꺼다.

// ** [+] 던지기 무기 어떻게?? (없앤다면 인벤창에 착용칸(TW칸) 없애거나 비활성화처럼 보이게 처리)

[+] 타격 무기도 특별한 장점 추가해주기 
(좀비를 때리면 스턴이 조금 더 오래 걸린다던가, 밀치기를 만든다면 더 많이 밀치게 <-> 날붙이 무기 장점: 좀비 부활이 더 오래걸림 (부활을 다시 만든다면))

// [+] 무기 깨질때 소리 추가 (작지만 설정함 - 좀비 사망에 뭍힘) => 확인 필요 (일단 메세지도 띄움) -> 소리 확인 완료 
// [+] 다른 층에서 죽은 좀비들이 있고, 플레이어가 그 층으로 이동시 한꺼번에 좀비 사망 사운드가 들림
// [+] 캐릭터 동기화 문제 -> 캐릭터가 무기를 들고 있을때 스탠스가 변하는게 동기화 안 됨 (그냥 가만히 서있는 포즈에서 무기 휘두름)

\\ ***** [+] 아이템 동시에 먹기 시도 => 데이터 레이스 발생 안 하나?

$ *** [+] 아이템 떨구기 벽이나 장애물에 딱 붙어서 버리면 다시 주울 수 없게 놓임 (사실 주울 수는 있는데 벽에 가려져 안 보이게 되는거)

// [+] 플레이어 스폰위치 겹치면 게임 시작시 날라감;;; (지금 랜덤으로 지정하는 느낌임) => 서버 인덱스에 따라 지정 스폰위치 넣음
// [+] 왜 좀비 사망 로그, 직접 죽이는데 직접 죽임이랑 동기화 둘 다 뜨는거지? 
// => BaseZombie.cpp에서 WaittingTimerElapsed()가 부활시키는 건데 SetDie(true); 이거 맞는 건가?
// => 좀비 사망 GEngine 출력 로그 주석처리하기

[+] 한글 아이디 로그인/등록은 되지만 인게임 화면에서 글씨 깨져보임

// [+] 차키로 열린 차는 전조등을 켜서 표시하기?
*** [+] 옥상도 열리면 문도 같이 열리게?

$$$$$ ***** [+] 죽을때 공중에 있으면 땅으로 꺼지면서 크래쉬 일어남 ㅋㅋㅋㅋ

// [+] 접속 안한 다른 클라는 UI에서 빼서 보여주기 
// [+] 러닝 좀비 버그들
// - 러닝 좀비만 죽을때 사운드 2번 들림
// -> BeAttacked()[피격=사망 사운드 재생 & 피격 애니메이션]를 피가 남아 있을 때만 실행되도록 하게 바꾸니 고쳐짐 
// -> 다른 좀비도 사실 죽을때도 BeAttacked() 불려서 두번 들려야했지만, 원래 메시는 히든되서 하나만 들리게 된건데 러닝좀비만 좀 이상하게 히든이 늦게되는지 둘다 겹쳐서 재생된듯;;
// - 에디터에서 러닝 좀비가 있는 층으로 갈때 
// "LogSkeletalMesh: Error: Material with missing usage flag was applied to skeletal mesh /Game/ZombieAsset/RunningZombie/RunningZombie.RunningZombie
// LogSkeletalMesh: Error: Material with missing usage flag was applied to skeletal mesh /Game/ZombieAsset/RunningZombie/RunningZombie.RunningZombie"
// 해당 에러를 항상 띄움 => 머테리얼 0번 glass 머테리얼 수정한 거 때문이였음

[+] BaseZombie.cpp에서 PostInitializeComponents에서 
	auto AnimInstance = Cast<UZombieAnimInstance>(GetMesh()->GetAnimInstance());

	AnimInstance->OnMontageEnded.AddDynamic(this, &ABaseZombie::AttackMontageEnded);
	AnimInstance->OnMontageEnded.AddDynamic(this, &ABaseZombie::ShoutingMontageEnded);
	AnimInstance->OnMontageEnded.AddDynamic(this, &ABaseZombie::BeAttackedMontageEnded);
이렇게 하나의 애니 인스턴스에 여러개의 OnMontageEnded 작업을 할당해주니 어떤 애니메이션이 끝나든 상관없이 해당 작업들이 모두 불림
(지금까지는 크게 문제는 없어 보였음)

***** [+] 좀비 플레이어와 겹칠시 (통신이 안 좋아서 다른 클라가 좀비랑 겹칠 수 있음) 좀비 뒤로 막 밀려나가면서 동시에 서버로 부터 위치 동기화를 바로 받아 이상하게 보일때 있음 (막 왔다 갔다 순간이동함)

***** [+] 좀비 hp 동기화도 패킷 로스 발생하면 내가 좀비 죽였지만 서버는 아직 살아있어서 좀비 시체 움직일때 있음

// [+] 플레이어 패킷 너무 자주 보냄 
// => 큐에 담아서 하나씩 빼서 작업하는 방식인데, 컴퓨터 사양이 안 좋으면 해당 작업이 밀려서 캐릭터 움직임에 딜레이가 생김

// [+] 캐릭 죽으면 아이템 다 떨구기 => 주변에 랜덤으로 흩뿌림
*** => 근데 아이템 벽 넘어/사이로 버려지는 것 처럼 흩뿌려진 아이템 안 보이는 곳에 버려질 수 있음

// [+] 좀비 가끔씩 잠시 가만히 서있기 구현하기?
// [+] 좀비 걷기 애니메이션 재생 배속 좀 느리게 해보기 (너무 빨라서 좀 뚝뚝 끊겨보이는 거 같아서)

// [+] 채팅에서 엔터 기능 넣기
**** => 엔터 눌러도 채팅창에 포커스 계속 유지하게 만들기

* [+] '유다희' 메세지 잠깐나오고 사라질때 있음 (계속 안 남아있고) -> 다른 UI 메세지가 불리던 도중이면 해당 메세지랑 같이 없어지는 느낌임
*** => 그냥 데쓰캠 만들꺼니까 걍 놔두기

// [+] 별로 중요하진 않지만, 자동차키로 옥상열려고 시도하면 메세지는 나오지만 소리는 안 나옴
// [+] 지상 2층 빨간키(총 2개)는 빨간차(총 2대)를 열수 있게? (=> 지상 2층까지 가야하지만 빨간차는 2개 밖에 없기 때문에(맞는 차 찾을 확률 50퍼) 해당 열쇠 찾는게 좋음)

$ *** [+] 아이템 픽업할때 띄우는 아이템 이름 조금 이상함 (코드내의 설정 이름으로 그대로 떠서 "ItemPickUp:MagicStick" 이런식임;;)

// [+] 힐링 지속 프로그레스 바, 힐링상태가 아닐때는 안보이게 하기 (자동으로 껐다 다시 보여줬다식으로)
// [+] 좀비 패트롤 때는 걷기 구현 => 속도 느리게 하고 거기에 맞춰서 애니메이션 배속도 같이 느리게하고, 플레이어 발견하면 그때 뛰기
// ===> 클라에서 좀비가 어떤 상태 ([걷기]패트롤 중임, 마지막 발견 장소로 이동 중 / [뛰기]플레이어 따라감, 샤우팅, 발소리 따라감) 인지 
// 개별적으로 판단할 수 없어 서버로부터 해당 상태정보(targetType) 받아야함 ~~~> 그래야 클라 ZombieMoveTo에서 똑같이 좀비 움직임 스피드 맞출 수 있음
// =====> path 패킷에 같이 담아서 넘겨주면 될 듯 함 (0.1마다 보내긴해서 스피드가 살짝씩 안맞아 뚝뚝 끊길 지는 확인 필요)

$ *** [+] 프로젝트 이름 좀 바꾸기? (그냥 Project말구... 진짜 타이틀로) & 패키징 실행파일 아이콘 지정하기

[+] 화장실에 있는 거울 비추는 모습이 반대임;; (거울을 바라보면 등이 비춰보이고 거울에 등을 보이면 정면이 보임;)

// [+] 좀비끼리 뭉쳤을때 좀비 피직스 설정이 ray casting과 충돌로 설정되어 쓸떼없이 detect/lost 반복해서 패킷 낭비시키는 일 발생 
// => 피직스 설정을 바꿔 visible(ray casting)과 충돌 무시 처리함

*** [+] 지하 1층 냉장고 라이팅 예전에는 혹시 어땠는지 물어보기 (5.5로 옮기며 혹시 사라진건가해서) 
=> 예전에는 주변을 좀 밝혀 줬었는데 지금은 사라진거 같음
// ==> 근데 어차피 맵 바꿀꺼니까 일단 놔두기(폐기) => 새로운 맵으로 안 바꿀 꺼임;;

** [+] 소방관 담배 타이머 UI로 만들어주기

// [+] butcher knife랑 사시미 스폰 올리고 도끼는 좀 빼기 
// => (지하1층: 사시미2, 식칼2 / 지상1층: 도끼2, 사시미1, 식칼1 / 지상2층: 도끼1, 사시미1, 식칼1)
// [+] 10분 지나면 클라 자동으로 꺼지는 거 막기
// [+] 좀비 슬라이스 동기화 임펄스 적용 안되고 있는거 고치기
// => 고치긴 한거 같은데 로컬로 확인해보기에는 렉이 심해서... 원격으로 한번 다시 확인해보기 (impulse 적용되서 날라가는지 & 같은 방향으로 날라가는지)

***** [+] 서버에서는 캐릭 체력이 이미 0인데, 아직 클라들은 해당 체력 패킷이 몇개 소실됐는지(수신할때) 아직 살아있음 
(좀비가 갑자기 아직 살아있는 2번클라는 무시하고 나만 공격하는 거 보면 알 수 있음) 
<테스트 환경은 서버, 클라 둘 모두 한컴에서>

\\ % ***** [+] 아이템 드랍 오류 (분명 붕대를 떨궈줬는데 다른 클라가 주워 보니 담배가 되어있었음;; -> 참고로 붕대 떨구기 전에 담배를 다른 클라가 떨궜었음)
=> 잘 모르겠음;; 그 이후로는 한번도 본적이 없는 버그

// [+] 2번째 접속하는 플레이어는 캐릭 선택창에서 1번 플레이어 이름이 항상 1P로 나옴 => 잘못된 패키징 사용 문제였던거 같음;;
// [+] 좀비 공격하던 도중에 죽이면 여전히 피격 됨! 
// (디버깅용 화면 출력(충돌체크 capsule) 주석풀었는데, hp확인하는거 예외처리 주석처리하고 돌려보고 진짜 죽었을 때도 해당 함수가 불리는 건지 확인해보기)
// [+] 한주형이 만든 맵으로 되도록 빨리 바꾸기 (맵 바꾸는게 여간 할 일이 많아서) -> 폐기;;

$ ***** [+] 좀비 hp가 적을때는 도망가기 구현해볼까?? (그리고 시간이 약간 지나서는 피가 회복되고 다시 활동하는 거지) -> 러닝 좀비 특성으로 넣으면 딱 좋겠는데?

*** [+] 플레이어 점프해서 내려갈때 공격하면 내려찍기 크리티컬 만들기?

[+] 캐릭별 특별 시너지 무기들 지정해주기?

$$$$$ [+] 옥상 열고 자동차로 탈출해보기 (아님 반대로 해보던지) -> 탈출 방법 제대로 잘 나오는지 (코드 상으로 좀 이상해보였음)
=> 무조건 마지막으로 문을 연걸로 나옴

// [+] 플레이어 캐릭 선택 안하고 레디 누르기 가능함 -> 그럼 걍 girl 캐릭으로 시작함
// => 먼저 캐릭을 선택안하면 레디 버튼을 못누르게 비활성화로 시작하게 만듬
// [+] 타이머 쓰레드 어떻게 할껀지 논의
// => 사실 타이머 쓰레드가 게임 시간하고 핑 검사(5초간격)만 수행하고 있었는데, 이거 그냥 BT에서 해줘도 됨 (BT도 deltaTime 계산하니까)
// ==> 굳이 시간 계산 하나를 위해 쓰레드 하나 더 늘려서 작업하기에는 쓰레드간 transition만 쓸떼없이 늘려서 성능 떨어뜨릴 거임
// ===> 게다가 플레이어 핑 계산해서 연결 끊는 작업 이것도 사실 에디터에서 돌릴때 필요했어서 (플레이 중지하면 자동으로 끊기게), 패키징은 프로그램 끄면 자동으로 잘 끊으니 필요X 
// -> 그니까 걍 코드 삭제하자
// [+] 샤우팅 좀비 이펙트 언리얼 5.5 업그레이드 후부터 안보임 (에디터 & 패키징 둘 다)
// Floor_400x400.uasset 이거 에디터 킬때마다 계속 변경되는데, 그냥 지울까? (뭔지도 모르겠는;; 건드리지도 않음)
// => 해결이 안 되어서 그냥 해당 파일(Floor_400x400.uasset) 추적금지 & .gitignore 설정 (딱히 변경하지도 않을 것이므로)

%%%%% [+] 게임시간 초과 엔딩/모두 사망 엔딩에서 탈출루트를 뚫어놓은 상태에서 게임오버되면 탈출방식이 해당 루트로 나옴 
(Fail이 아니라) + 문을 연사람도 나옴 (문 연사람은 괜찮은데 탈출방식은 Fail 띄우자)
===> 고쳤던 문제 같은데 다시 생김;; (1월2일 커밋-[28b386e])
=====> 이전 작업 내용 남아 있었음 (게임 클리어 패킷 보낼때 보내기 직전에 항상 0(Escape::Fail)을 지정하고 보냄) 
=======> 방 세션 작업 하면서 잘못된 값 지정하는 거 같음 
===> 0으로 초기화는 room_states[Packet.roomnum()] 쓰는데, 패킷 보낼때는 room_states[roomid]를 사용 
(* 이때, roomid = clientInfo->roomid; 근데, clientInfo->roomid = Packet.roomnum(); (근데 또 이건 clientInfo->roomid == 0 일때 초기화함))

// [+] 10분 초과 체크를 ProcessPacket에 플레이어 패킷을 받는 코드에 붙어 있어서 10분 지나도 플레이어들이 아무도 안 움직이면 게임오버 UI 안됨

$$$ ***** [+] 인벤토리에서 우측 아이템들중 장착하고 있는 템들은 테두리를 빨갛게해서 표시해주기

// [+] 게임 사운드 오류 => 다른 층에 플레이어가 내는 소리들이 이상하게 너무 가까이 들리는 거 같음
// ===> 캐릭터 무기스윙, 아이템 줍기, 샤우팅 사운드

* [+] 캐릭마다 스태미나 회복 속도도 상이하게 만들어볼까?

$$$$ ***** [+] 아이템 떨궈졌을때 구슬로 표현하지 말고 진짜 아이템으로 보이게? ===> 일단 중점연구 먼저하고 시간 남으면 그때

// [+] 캐릭 선택창에서 빈 칸들은 비활성화 처리하기 (회색으로 표시?)

$$$ ***** [+] 캐릭 죽기 직전 힐링 아이템 사용하면 죽은 후에 다시 피가 차오름 (막아야한다)

// [+] 플레이어는 그자리 가만히 쭉 있었는데, 좀비 공격하고 직후에 살짝 움직이고 다시 공격함 
// => 실제론 서버에서는 정지해있지만, 클라에서 공격 애니메이션이 끝나면 바로 다시 ZombieMoveTo가 불려서 발생하는 문제
// ===> 0.1~0.3초 정도 공격 애니메이션이 끝나면 제자리에 idle 상태로 있게하는 일종의 보간작업 필요해보임 ==> 0.25초 idle 대기 추가함

\\ $$$$$ [+] 다른 클라 출혈에 죽는게 아니라 피격 당해서 죽게되면 (마지막 데미지가 좀비의 타격일때) 해당 클라 다른 클라들에서는 죽음 애니메이션 동기화 미스됨

// [+] 다른 클라가 좀비를 죽이면 "LogTemp: Error: [Error] BloodFX.Num() < 2 => BloodFX spawn failed!!!" 에러코드가 항상 나옴;;
// => 원인 찾기 ===> 피 이펙트 동기화에서는 이펙터를 하나만 생성하고 있었음

***** [+] 클라에서 좀비가 모두 스폰되기도 전에 BT가 실행되서 좀비 path 보냄 => (스폰 기다리고 path 보내기)

// [+] (에디터)프레임 드랍 발생시키는 "Ensure condition failed: ActorHasBegunPlay" 에러 조사하기
// => 나이아가라 이펙트 Endplay에서 발생하는 거 같음. 아님, 좀비를 처음에 죽이면 발생하는 거 같음!
// ===> Endplay에서 Super::EndPlay()를 부르지 않아 제대로 메모리 초기화가 되지 않아 발생했던 문제
// [+] UI 글자 깨진것들 좀 수정해달라 하기 => 텍스트를 확대를 해서 발생하는 문제 (텍스트 크기를 늘려야지...)
// ===> 일단 먼저 깨진 글자 더 있는지 확인해보기 
// ====> 타이머랑 상태/이벤트 알림 메세지랑 게임오버 시에 나오는 점수판 텍스트들 블러처리한 거처럼 이상함

*** [+] 드링크(회복) 아이템 추가로 효과도 줄까? (이동 속도, 공격 속도 소폭 증가, 스태미나 소폭 회복) -> 아이템 별로 상이하게

\\ $$$ ***** [+] 무기 아직 들고있는거 어색한게 많은거 같음 (이상한 방향으로 들고있음)

// [+] 인벤 꽉찬 상태에서 아이템 먹으려 시도하면 '꽉 찼다고' 메세지 화면에 띄우기
// [+] 좀비가 공격 중이거나 어쨋든 통신을 안보내는 상태일때 다른 층에 있던 캐릭이 해당 좀비가 있는 층으로 이동시에
// 마지막 통신을 보냈던 위치(이상한 위치;)에서 애니메이션 재생되고 있음!!!
// ==> path1에 더미 데이터 {9999,9999,9999} 를 보내 표시해줌 (그리고 ZombieMoveTo에서 예외처리)

***** [+] 인벤토리에서 아이템 내구도 프로그래스바로 표시해주기? (착용칸에 장착했을때 띄우면 좋을듯)

$ ***** [+] 게임오버 너무 빨리 나옴 (애니메이션 재생되기 전에 뜸) => 좀 딜레이 주고 띄우기

$$$ ***** [+] 캐릭터들 초상화 머리 생긴거로 바꿔주기

// [+] OneGameModeBase에서 SpawnItemBoxes 랑 SpawnOnGroundItem 에서 
// itemclass에 따른 iclass 값 지정이 서로 안 맞음 
// (SpawnItemBoxes 는 0에서부터 시작하고, SpawnOnGroundItem 은 1에서부터 시작함)
// => 패킷에 0 담아 보내면 소실되는거 막으려고 이렇게 만든거 같음

===================================================================================================
<+> 애니메이션 루트본 재생성, 서버 방 세션 분리, 기타 내가 작업한 것들 합쳐서 디버깅해서 나온 버그들 [[커밋-7022ead] 이후]
// - 캐릭 선택창에서 초상화 위에 뜨는 READY 글자 크기 키웠는데 안 커진거 같음 & 글자 깨져보임
// [+] 레디 버튼들이랑 캔슬 버튼들 색깔 넣어주기 (초록, 노랑)
// - 캐릭 선택창에서 레디버튼 누르고 다른 사람이 캐릭 변경하면 캐릭 버튼들 싹 다 초기화되서 레디 상태에서 캐릭 변경 가능함
// - 좀비 플레이어를 안 따라옴 (포착은 함(send/recv 문제는 아님), 다만 사용하는 데이터 구조가 바뀌어서 closest 플레이어를 못 찾음)
// - 회복 아이템, 키 아이템 사용 애니메이션이 재생 안됨
+ 점프 할때 다른 캐릭 상체 움직임이 더 이상해짐... (T자 형태로 팔을 펄럭거림)

\\ $$$ - 10분 지나도 겜이 안 끝남 => 방 세션 분리 작업에서 문제 있어서 현재 꺼놓은 상태
=====> 일단 이전에는 시간 측정 시작하는게 싱글톤 방식이였고, 시간 측정 시작시간도 겜서버가 로드되면 시작되어서 이거 바꿔야함 => 쓰레드 함수 로컬 변수로 바꿈!

// - 키 아이템만 동기화가 좀 이상함 (먹으면 바닥에서 사라지는데 UI가 업데이트 안 되거나 UI는 업데이트되는데 바닥에서 안 사라짐, 항상 2개씩 먹었다고 전송받음)
// - 자동차 열린거 전조등 표시 동기화 안됨 (따로 해당 열린 자동차 정보(자동차 아이디)를 보내진 않음 => 통신작업 필요)
// - 공격 버튼이 씹힐때가 있음 (뛸때 공격하면 자주 발생함) => 공격은 수행하는데 애니메이션은 재생 안 되는 거임 (+ 줍기 애니메이션도 마찬가지)
// + 공격 스윙 사운드 안 나옴
// - 인벤토리 한계치 넘어서 먹어짐
// - 계속 숨고르기하는 좀비 (X -> 플레이어 멍하게 가만히 바라보는 버그)
// ===> 사실 계속 숨고르기 하는게 아니라 플레이어가 시야에 계속 들어와 있으면 멈춤, 근데 항상 그런건 또 아니고 특정 상황(?)에서만 그런거 같음 (이유는 좀 더 분석 필요...)

- 아직 방 세션 나눈거 제대로 작동X => *아이템, 좀비 위치 똑같음 -> 아이템은 먹어도 문제없는데, 좀비 한대 때리니까 바로 크래쉬
%% [+] ===> 여러 방을 만들면, 어쩔때 어느 한방은 좀비들이 잘 끊김없이 돌아가는데, 다른 방쪽은 좀비들이 모두 엄청 렉걸린거 마냥 끊기며 움직임

**** [+] 방마다 아이템 랜덤 위치에 할려면 코드 좀 바꿔야함 -> 지금은 서버가 켜지면 바로 이니셜라이져에서 해당 작업 설정해줘서
 함수로 따로 만들고 각 룸마다 해당 함수를 부르도록 해야함 (+ 싱글톤 방식인 아이템 컨테이너 변수도 물론 바꿔주고)

// - 회사원 빠른 문열기 오류 있는 거 같음 (안 빠름 5.23초 -> 3.73초) ====> 더 슈퍼 버프 2.5초 로 변경
// - 영원히 열쇠를 사용 할 수 없는 버그 있음 (아 슈팜 계속 3번이 키 착용인 줄 착각함 ㅋㅋ) => 큇슬롯UI 퀵슬롯 아이템 착용번호(단축키) 같이 띄움
// [+] 숨고르기 아에 안 하는 작동이 안되고 있음;;; => 로그는 출력되는데 멈추지를 않음 
// ===> 근데 지금 구현한 숨고르기 문제 있음:  플레이어를 시야 포착은 하지만 발소리는 포착 못함
// =====> wait 태스크로 구현하던걸 -> settarget에서 isstanding 플래그가 true면 새로운 랜덤 패트롤 지점 찾기를 안하도록 구현
===================================================================================================

$$$$$ ***** [+] 연결 끊은 플레이어도 마찬가지로 죽으면 아이템 떨구는 거 처럼 아이템 떨구기 구현
$$$$$ =====> 걍 연결 끊기면 해당 캐릭 죽이고 바로 주변에 아이템들도 떨구기

***** [+] 첨에 들어와서 레디 누르고 나갔다 다시 들어오면 아이디, 레디 상태 안 보임, 채팅은 잘쳐짐(잘 전송함), 아이디, 레디 상태가 안 보이는 거 빼곤 잘 작동함

// [+] 탈출문이 열리면 알림 메세지만 띄우지 말고 옆에 task UI도 색 바꿔주기 (초록색에서 파랑색으로?) & '(열림)' 이라고 텍스트 추가
// [+] 좀비도 새로 루트본 작업해서 고장난 머리카락 보이도록 바꿀까요?

*** [+] 좀비들 공격 거리 좀 먼거 같음;; 좀 줄이자

// [+] 옥상 탈출 실패이후(5분후) 옥상 탈출 키 모두 겟또 하면 미션창 오류 생김! 

***** [+] 다른 플레이어가 최종으로 남아있다가 마지막으로 죽으면 죽음 애니메이션이 재생 안될 때가 있음 

** [+] 연속 3타 공격에서는 옛날에 쓰던 위에서 아래 대각선 스윙 공격 애니메이션 사용 (데미지도 +++)

$$$$$ [+] 힐링 아이템 먹을때/지혈 할때 다른 퀵아이템 장착이 가능한데, 이러면 무기로 바꿔서 힐링 아이템 섭취/지혈 애니메이션 재생 중에 
무기를 들어서 휘두르면 아이템 바로 사용 가능한 글리치 있음 (-> 애니메이션 캔슬, 스킵 ㅋㅋ)
===> 힐링 아이템 섭취/지혈/공격 애니메이션 재생 중에는 다른 아이템으로 교체 장착하는 키를 막자!!!

***** [+] 캐릭터가 뚜까 맞아서 체력이 0이되면 좀 딜레이 있다가 죽는 애니메이션 재생됨 => 출혈로 체력이 0이되면 바로 재생되는데에 비해

// [+] 공격 애니메이션 약간 버그 있음 (애니메이션이 재생이 안되다가 끝에 가서 살짝 재생됨(씹히는 거 같음) - 1월21일 23시 정각쯤에 찍은 영상 참고)
// => 원인 발견한 것 같음 -> 스윙 애니메이션이 끝날 쯤에 다시 공격 버튼을 누르면 씹히는 거 같음 - 2월7일 11시15분 쯤에 찍은 영상 참고
// ===> 코드 한 줄 문제;; m_bIsAttacking 을 Attack 함수에서 true 하고 바로 밑에 false 하는 코드가 있었음

%% [+] 이미 게임 중인 방으로는 못 들어가게 막기 
(아님 뒤늦게 참가하는걸 가능하게 한다 생각하고 그대로 놔 둘까? -> 대신, 현상태에서 이미 겜 중인 방들어가면, 크래쉬나 버그 없는지는 모르겠음)
=> 한주형이 DB 사용해서 실시간으로 유저 접속, 인게임 뭐 이런거 관리하게 해서 방지하게 만든다고 함

%%%%%%% *** [+] 슬라이스 에임 오프셋 동기화

// [+] 마지막 플레이어 발견 장소로 이동 할 때도 뛰도록 하기 (+ 발소리도)

// [+] 계단 넘어로는 발소리 그냥 무시하게 만들기 -> MoveTo에서 미리 계단 넘어로 이동하려 시도하는 건 막아 놨는데 이럼 계속 문앞에서 대기 할 수도 있음(입틀막)
// ==> 문앞까지 갔다가 다시 관심 끄고 패트롤 상태로 전환함

// [+] BT task 클래스들 상속 관계나 사용 변수들 좀 제대로 정리하기 (구조를 좀 더 깔끔하게, 유지보수, 재사용에 좋게끔)

// [+] 좀비 플레이어 마지막으로 본 위치로 갈때 플레이어 위치를 실시간으로 받음 (동영상 2/16 18시 18분 꺼 확인 ㄱㄱ) 
// ---> SetTargetLocation 문제 인 듯 => 발소리가 문제 였음 (SetTargetLocation(FootSound)가 무조건 계속 돌아가서) 

// [+] 좀비 플레이어를 계속 놓쳤다가 다시 발견하면 MakeNoise(Horde Sound) 연속으로 계속 발생 시키는 거 딜레이 주기
//  ===> 10초 (서버, 클라 모두 작업해줌)

// [+] 게임 오버시 임시로 띄워둔(데모발표용) 게임 엔딩씬 너무 바로 나옴 (캐릭 죽는 애니메이션을 못 봄) -> 딜레이 좀 넣기 (+ 게임 정상 엔딩시에는 바로 나옴)

// [+] makenoise 작업 한 내용 쪽 코드 좀 정리 (안쓰는 주석들 삭제하고 iocp서버 포인터 좀비 클래스에 변수로 전체 뭉탱이로 쓰지 말고, 필요한 좀비db벡터만 포인터로 쓰기) 
// -> 싱글톤 객체 iocp_core 활용
// XXXXXX ====> AcceptThread에서 accept() 같은 네트워크 블로킹 함수가 들어가 있어서 GetInstance가 무한 대기에 빠짐, 
//              그리고 멀티 쓰레드 환경에서는 GetInstance()가 여러 번 호출될 수 있어 그럼 데드락 상태에 빠짐
// * -> 뭐 포인터 하나 사용하면 64비트 정도 사용하는데... (패딩 때문에 객체 많이 생성하면 않 좋긴함)

***** [+] 샤우팅 좀비 특성 추가 내용 - 플레이어 발견시 기본 사운드 내는 거 좀더 시끄럽게 (실제 반경도 더 넓혀서 탐지될 수 있도록)

%%%%% [+] 좀비 BeAttacked playsound는 playsound2D로 구현되어 있음 (BaseZombie.cpp)
\\ @ => 이거 멀티로 멀리있는 다른 플레이어가 좀비 타격하면 소리 나한테도 들리는지 or 가까이서는 다른 좀비 피격 당하는 소리 (다른 플레이어가 타격) 들리는 지 확인

%%%%%%% ******* [+] 겜서버 시작하자 말자 꺼지는 문제 (에디터에서 빈번함) -> 아이템/좀비 둘 중 하나만 생성하고 꺼짐 => 2/17 오전5시 쯤 영상 확인
===> 걍 내 컴터 문제 같기도...
******* ===> BT 병렬로 바꾸기 브랜치 새로 만들기 전 한주형이 마지막으로 작업 했을때로 브랜치 체크아웃해서 서버 바꿔서 그때도 있던 문제인지 확인해보기
===> 노트북 용량 부족 때메 그랬던 건가? 용량 좀 비우니까 더이상 발생 안하는 거 같음

@@@@@ $$$$$$$ ******* [+] 좀비 BT 지이이이이인짜 병렬적으로 돌아가게 만들기 (깊이 우선 탐색 방식 => 너비 우선 탐색 방식) 
---> SetTargetLocation 이게 문제임

// [+] 호드 사운드 오류(클라쪽) - 플레이어를 실제로 포착해서 호드 사운드 내는게 아니라 detect 되면 바로 그럼(포착 랜덤확률 무시함)
//  ===> 이건 고쳤는데, 패키징 후에 playsoundatlocation 크래쉬 때메 걍 소리 뺐음...
//  =======> 언리얼 5.5부터 도입된 GC(가비지 컬랙터)가 문제였음 -> 이제 해결함

$$ ***** [+] 샤우팅 좀비 가까이에서 처음 마주치면 샤우팅 애니메이션 캔슬하고 즉시 샤우팅하고 공격이랑 같이함

// [+] 겜서버에서 iocp클래스 좀비 관련 vector(db)랑  함수 initializer나 bt 생성 함수 같은거랑 다 좀 다른 클래스(zombieBT) 만들어서 거기에 분리해 넣기

// ***** [+] (패키징에서만) playercharactercontroller zombie->targetType = player 설정하는데에서 호드 사운드 재생시키는 코드 계속 메모리 엑세스 오류(크래쉬) 내서 예외 처리하니 아예 재생 안되는 버그
// ===> 모든 예외처리 다 해보고 별 지랄을 다 해봤는데 결국 안됨 playsoundatlocation 이거 걍 *같은 함수 같음, growl 사운드 걍 안 할래...

// [+] 패키징에서 갑자기 빨간차 스폰이 안되고 있음 ---> 또 동적으로 메시 바꿔준다고 패지킹 해당 메시 미리 패키징 안해서 ㅈㄹ난거였음

* 2/18 오전5시에 발견한 패키징 버그들
%%%%%%% [+] 자동차키 UI, 알림창 바꾸는 패킷 안보내짐 (옥상키는 근데 잘 보냄;;)
=====> 이거 가끔씩 그러는 거 같음;;; 또 잘된때는 잘됨 (사양이 진짜 문제인가..)
$$$$$ [+] 좀비 패스 파인딩 이상함;; 삥 돌아서 옴
$$$$$ [+] 샤우팅 좀비 눈 앞에서 갑자기 내가 갑툭튀하면 애니메이션이 이상해짐 (샤우팅 후에) 
 / 아님 그냥 공격 바로 할 때도 있음 (근데 샤우팅은 실제로는 서버상으로 함 - 애니메이션 캔슬 같은 효과) - 2/17 07시30분 영상 참고

** [+] 서버 로그 콘솔창 출력 메세지들 txt로 저장하고 있기

***** [+] 겜서버 플레이어가 접속을 끊으면(프로그램을 닫으면) 같이 겜서버 프로그램도 꺼질 때 있음 (크래시 발생함)
===> 이거 보니까 좀비 BT 메모리 할당 해제하니까 크래시 일어나는 거였음...
@@@ $$$$$ ===> 메모리 해제가 왜 문제인지 조사

// [+] 발소리 들었을 때에도 소리내게 하기 (플레이어를 발견했을 때랑 똑같은 효과음인데 소리는 더 작게)

// [+] 좀비 시야거리/발소리 포착거리 대폭 늘리기 (이제 확률 적용했으니까 멀리로 설정해도 됨) => 각각 2배 정도 늘림

@ ***** [+] 2/22 14시 30분쯤에 찍은 동영상에서 42초에 좀비가 플레이어 발소리를 탐색하고 난 뒤에 모든 사항을 리셋 안하고 바로 마지막으로 플레이어 본 위치도 탐색했음 
         + 2/23 21시 44분 영상에서도 포착됨 (1분 14초에서)
		 + 2/24 7시 11분 (에디터)영상에서 좀비 내 위치를 실시간으로 추적 (벽을 가운데 두고)
	  // + 2/24 7시 20분경 (패키징)영상에서 좀비 공격 애니메이션 직후 내 위치를 실시간으로 추적 (벽을 가운데 두고) 
      // ===> 이게 원인인듯, 결국 wait도 BT 안에 넣어야 할 듯 하다. (병렬적으로 돌아가게 -> wait 중에도 탐지 OR wait 끝나고 나서 플래그 초기화 하던지)
	  // ======> wait 끝나고 나서 플래그 초기화 사용!
	  
@ $$$$$ ***** [+] 좀비가 뒤에 공격 받으면 멍청하게 계속 맞기만 함 (클라에서 맞으면 때린 플레이어 쪽을 바라보도록 바꾸기? - 공격 할 떄 처럼)

// [+] 좀비 시야 확률 넣었는데, 클라에서 좀비가 시야에 포착하면 여전히 바로 Detect 패킷을 보냄(확률 계산은 서버에서 해서)
// , 그럼 샤우팅 좀비 같은 경우 보자 말자 샤우팅 이펙트하고 애니메이션 재생되는데 실제로 서버에서는 포착한게 아닐 수 있음

// [+] 지상 2층 빨간키 파랑차랑 맞는 버그

// [+] 무리 행동에도 확률 넣기

// [+] 플레이어 두명이서 번갈아 가면서 좀비랑 가까이 갔다가 멀어졌다가 (시야에 두명다 포함되면서) 해서 어그로가 계속 바뀌는지 (가까이 있는 플레이어로) 테스트

// [+] 좀비 공격직후에 블랙보드 초기화 때문에 다시 시야 검색하게 되는데, 공격 애니메이션 재생중에 플레이어가 멀리 떨어지게 되면 시야 검사 다시 할때 실패 할 수도 있음
// => 뭐 충분히 멀어지면 (8m 이상 가지만 않으면 바로 다시 포착) 그렇다고 치는데 애매하게 한 10m정도 떨어졌을때 놓치는 경우가 있는데 
// , 이거 이러면 공격/샤우팅 직후에 한 1~2초 동안은 10m 이내에는 100%로 시야 탐지 가능하게 만들면 좋을 것 같음
// ===> 애니메이션 재생후에 5초 동안 +50% 확률 버프 넣음 -> 15m까지는 100% 다시 탐지함
// + 잠시 플레이어를 놓쳤을 때도 마찬가지로
 
$$$$$ ***** [+] 발소리도 동기화 되는 중인지 확인

*** [+] ClosestPlayer 찾을 때 같은 거리에 두명이상 포착되면 랜덤하게 플레이어 지정하는데, 
 이거 플레이어 포착할 때 canseeplayer 확률 때문에 미리 한번하고 그 뒤에 또 settarget에서도 한번 더 해서 중복해서 하는데 서로 다르게 가장 가까운 플레이어 지정하게 될 수 있음
 => 거의 보기 드문 경우긴 해도 문제 발생할 수 있을 지도 모름
 
***** [+] 가끔씩 죽는 애니메이션 두번 재생됨;; (3월9일 1시에 찍은 영상(에디터) 참고)

***** [+] 좀비 애니메이션 재생후에 패킷 리셋 해주긴 하지만 그래도 가끔씩 밀리거나 타이밍이 어긋나면 또다시 제자리 걸음하는 버그 발생함;;(실제로 플레이어는 시야에 없지만 있다고 생각함) (BT 0.05초로 하고 패킷 리셋 딜레이는 0.07초)
// => 3월 9일 새벽 2시 30분경 영상 참고
// => 플레이어를 따라갈때도 도착지 도착하면 reachfinaldestination에서 clearblackboard 불러서 모두 초기화 해주긴 해서 2초정도 제자리 걸음하다가 다시 패트롤로 돌아감 (근데 계속 제자리 걸음 할 떄도 있음;;;)
// (예전에는(BT 인터벌 0.1초때) 이것도 켰으면 좀비가 공격에 딜레이가 생겼었는데 0.05초로 바꾸니 괜찮아짐)
// ===> 해결한듯: 리셋 방식을 바꿈. 서버에서 blackboardclear하면 targetType으로 클라에게 알려줌 (클라도 detect 패킷 리셋하라고),  
// 그대신에 애니메이션 재생 후에 WaitOneTick_SentPath는 사용 안 하게 됨 
// (targetType을 보내야 하니까, 글고 이거 사용한 이유가 애니메이션 끝난 직후에 SendPath보내서 조금 순간이동하는 거 때문이였는데 이것도 targetType을 따로 BlackBoardCleared로 바꿔주니까 괜춘)
====> 해결 아직 안됨;;; 3월9일 1시경에 찍은 패키징 영상 참고

***** [+] 숨고르기 상태에서 플레이어를 계속 무시하는 버그 있음


<Note>

- 여기 버그 리스트 정리 좀 하기;;;

// - 한 컴퓨터에서 내부적으로 서버-클라를 모두 돌릴 경우 각 클라들 서로 캐릭터 움직임(만!) 정보를 늦게 수신 받음 (에디터 & 패키징 모두!) -> 고침
// - 근데 지금 플레이어 출혈 효과 동기화 어떻게 되고 있는 거지?  => 그냥 캐릭 체력 변화 생기면 패킷 전송하고 있는 방식임

# 잉 근데 gitignore 설정 해줬는데 /Binaries 폴더 내 파일들 왜 올라가지?
=> 아마 이전에 이미 추적하고 있던 파일들이라 올라가는 거 같음 (따로 추적 중지를 해주면 됨)

// - 옥상키로 자동차 문 열 수 있음 (그렇다고 열리지는 않음) -> 맞지 않는 키라고 에러 메세지 띄움

$$$ ***** - 미리 옥상을 열어두면 5분 뒤 헬기 떠난 뒤에도 혹시 나갈수 있나? -> 있음! 수정필요
// -> 있음, 심지어 옥상키 헬기 지난 뒤에도 사용 가능
// -> 추가로 이건 아이템 줍기 동기화가 잘 안되서 생기는 문제긴 한데 옥상키1(지하1층 스폰 옥상키)을 두명이 다 먹으면 해당 키로 옥상 문 열기 가능 (옥상키2번 없이)

$$$$$ - 차 문 여러 개 열면 각각 열린 차들 문 위치 모두 다 탈출 영역이 되는지? => 안됨!! 최신걸로 덮어씌워짐!

* - 다른 클라 손전등은 동기화 안되고 있음 (항상 켜져있는 상태고, 손전등을 비추는 방향도 고정으로 캐릭이 바라보는 앞임)
*** => 손전등 키고 끄고 동기화도 안돼 있음 (항상 켜짐)

*** - ProcessPacket 송수신 쓰레드에서 zombie 데이터 값 변경해주려고 좀비 수 만큼 루프(해당 좀비 검색)를 도는게 좀 많아서 이거 최적화
=> zombieDB를 벡터가 아닌 맵으로 바꾸기 (검색 최적화) -> 대신, 맵 크래쉬랑 에러 발생 위험성 높으니 조심하고

# 깃 작업 할때는 언리얼 에디터 끄고 작업하기 (에디터 켜져있으면 pull이 안 받아짐;; 글고 에디터 키고 pull 시도하고 에디터 끄고 다시 pull 하려고 하면 이상한 커밋 내용(pull 받아야하는 내용들)이 갑자기 생김)

# 네트워크 연결시에 클라-서버 같은 라우터를 사용하고 있어야 연결가능 (IP 주소 앞자리들이 같으면 같은 라우터 같음)
[+] 그래서, 학교 컴터 랜선 컴이랑 와이파이 연결된 노트북이랑은 연결이 안됬음
    근데, 이상한 점은 그럼 디코로 각자 pc에서 서로 연결 가능했던건 어떻게 가능했던거지..? 
	(특히 한주형 와이파이는 121.140.* 이고 내 와이파이는 192.168.* 이런식인데..?)
	
- 좀비 스폰수 테스트
	한 화면에 40마리) (로컬/원격) 문제없이 부드럽게 잘 돌아감
		   80마리) (로컬) 프레임이 좀 떨어져도 플레이는 할만함. 
		   하지만 프레임 드랍이 갑자기 심해질때 있음. (플레이가 아예 안될정도로) 이럴때는 해당 층을 벗어났다가 다시 들어가거나 플레이어가 죽으면 괜찮아짐
		   120마리) (로컬) 80마리와 마찬가지로 프레임 드랍 문제가 생길 수 있지만 아니라면 80마리때와 비슷하게 플레이는 가능한 수준 (그래도 당연히 80마리보다 평균 프레임 떨어짐)

// - 서버 exe로 킬때 플레이어 모두 나가면 자동으로 실행프로그램도 꺼지는거 잠시 막기 (로그 보고 싶은데..)

- 클라 점프하고 프로그램 끄면 공중부양할 수 있음;

# 언리얼 에디터 컴파일 버튼("Hot Reload")이랑 비주얼 빌드랑 둘 다 컴파일해주는 건 똑같은데, 에디터 컴파일 버튼 누르고 (코드 수정 없이) 비주얼 빌드 다시하면 에디터를 나갔다가 다시 열려고 하면 안열리는 버그 있음;;
-> (.modules 파일이 서로 충돌하는 거 같음)
=> 그래서 그냥 에디터 컴파일 버튼만 이용하거나, 솔루션 빌드하면 에디터 끄고 다시 켜주기 
*** (+ 참고로 ctrl+f5 누르면 빌드랑 에디터 다시 자동으로 열어주긴 함) => 근데 이렇게 열면 로비서버랑 연결이 안됨;; (ipconfig파일을 읽는 위치가 다른가?)
-> (참고로 솔루션으로 빌드하면, .modules 내에서 "Project: "UnrealEditor-Project.dll" 처럼 깔끔하게 찍히고
컴파일 버튼 사용하면, "Project: "UnrealEditor-Project.dll-1133" 이런식으로 뒤에 숫자가 붙음)
=> 그래서 만약 해당 에러 뜨면 그냥 솔루션 Rebuild 누르면 됨

# 언리얼 엔진의 Hot Reload는 사실 위험성이 있음. 컴파일이 오류 낳을때 오류난 그대로 블루프린트나 파일들이 저장됨. (그럼 캐시 파일들을 모두 삭제하고 다시 빌드를 해줘야함)
=> 그에 비해 라이브 코딩("Live Coding")은 안전한편 (다만 시간이 오래 걸리는 편)
★☆★☆★☆★☆ ===> 그니까 알잘딱하게 HotReload / LiveCoding 선택해서 사용!

# [+] 라이브 코딩 단점: 런타임 에러가 뜨지만 컴파일은 될 때, 컴파일시에 에러를 띄우는게 아니라 그냥 컴파일을 성공했다고 띄우고 실제로는 컴파일을 안하는 경우가 있음

- 게임오버 패킷 -> 서버에서 게임오버 조건이 맞으면 한번만 보내는게 아니라 계속 보냄 
-> 그래서 예전에 게임시간에 숫자가 계속 겹쳤서 나와서 이상했던거였음 -> 클라에서 따로 두번이상 업데이트 하는 작업을 막아서 이제는 괜찮은데 솔직히 자원 낭비긴함 
(* 또 참고로, 서버 ProcessPacket에 플레이어 패킷을 받는 부분에서 해당 검사를 실시해서 플레이어가 이동해야 해당 조건 검사했음)

// - 뛰기/걷기 전환이 지금 shift 버튼으로 전환하는건데 지금 내가 뛰기 상태인지 걷기 상태인지를 움직여보지 않으면 알 수가 없다 (발소리내고 안내고가 우리겜이서 매우 중요한데... 좀 불편할듯)
// => 이것도 아이콘으로 알려주기? (탈콥처럼)
$ ===> 근데, 스태미나 다 사용해서 걷기 할때도 뛰기 아이콘으로 나오는거 약간 빨강으로 해서 뛰기를 숨차서 못하는 중임을 대강 느낌상으로 알려주기

# 언리얼 에디터 유용한 단축키들 
=> F11-게임화면을 전체화면 크기로 전환, F9-스크린샷, F8-게임플레이 조작/에디터 조작 전환
, Shift+F1-인게임에서 마우스 커서 사용으로 전환, Alt+P-플레이

- 점프 하면서 키사용 가능

# ★☆★☆ 폴더명 한국어 쓰지 말자... ipconfig 같은 경우 폴더에 한글이 들어가면 경로를 못 읽어서 로비랑 연결 안 됨

- 사실 포착 확률 시스템 클라에서 구현했어도 되는데...(클라에서 확률 돌려서 실패한다하면 포착 패킷을 안보내는 식으로) 그래도 서버에 구현해서 디버깅이 쉽긴함 

# ★☆★☆ 콘솔 출력 창 한글 깨짐 버그 수정방법: 인코딩 방식 UTF-8 => UTF-8-BOM [Windows 949]으로 변경 (Notepad++로 오른쪽 아래에서 간단하게 변경가능함)
# 마찬가지로, 소스트리에서도 변경사항 패널에 한글 주석등이 깨지면 같은 방식으로 고칠 수 있음

# ★☆★☆ 패키징 프로그램 실행중에 콘솔창 열어서('~'키 누름 나옴) 'DisableAllScreenMessages' 이거 메세지 치면 화면 출력(GEngine 출력) 메세지 더이상 안 나오게 할 수 있음 


<중점연구 분야 남은 기능>
// 1. n개 절단... 
2. 절단 부위 다시 합쳐지며 좀비 부활하게 하기
3. 절단 신체부위들 레그돌 효과
// 4. 플레이어가 바라보는 방향에 따라 캐릭터 무기 휘두르기 조절 가능하게 (플레이어가 바라보는 각도: -10~30 => 자르는 각도: -30~30) 

[+] 절단 동기화(완벽하게 애니메이션 포즈도 맞춰서)는 생각해봐야함...

// - 브레인스토밍
// 1. 가상본 여러개 만들고 자르기
// 2. 피직스에셋을 이용해서 n개 절단 표현
// 3. 컨벡스메쉬 버텍스가 거리가 멀면 뚝 떨어지는 걸로 -> 생각해보니 사용하기 어려울 듯 (정확할지도 모르겠고)
// 4. 스켈레탈->스태틱->(컨벡스)->프로시저메시->프로시저메시 슬라이스->프로시져메시2개->(스켈레탈 이용해서 연결성 확인해서)n개로 나누기
// 5. 영 안되면 따로 만들어 놓은 고정된 메쉬로 짤리게 하도록 구현
// ...
// * 채택 => 버택스들을 모두 순회하여 가장 가까운 본을 착고 그룹화하여 따로 떨어 뜨림

//- 문제점 (이젠 해결)
// 1.현재 스켈레탈 메쉬를 절단 할 때 정확히는 잘리지만 프로시저럴 메쉬로 두 메쉬 덩어리로 만들어져서 잘림 
// 2.절단할 때 왼팔 오른팔이 떨어져있게하고 싶음(한 덩어리에 붙어 있는게 아니라 그리고 그게 ragdoll 상태였으면 좋겠음)
// 3.생각: 절단하려고 할 때 절단하는 범위에 피직스 애셋이 어디어디 충돌하는지 봐서 그걸 이용해서 그 부분들 중에 인접한 bone들을 각각 하나씩 뽑아서 그 부분을 연결 끊어버리면 왼팔 오른팔이 각각 끊어지지 않을까
// 4.하지만 인접한 bone이다 보니 스태틱 메쉬 덩어리로 자른 것처럼 정확한 위치가 잘린것은 아닐 것임 
// 5.그래서 이 정확히 잘린 스태틱 메쉬 덩어리의 버텍스 정보를 인접한 bone을 자른 부분에 입히게 하고 싶음
// 6.아니면 왼팔 오른팔 떨어져 있으면 분리해서 스태틱 메쉬로 생성한 다음 bone 구조들을 각각 붙여줘서 스켈레탈 메쉬처럼 ragdoll 상태로 만들면 좋을 듯
// 7.문제는 스태틱 메쉬 덩어리를 어떻게 분리할 것이고 어떻게 bone 구조들을 각각 붙여줘서 스켈레탈 메쉬처럼 만들것인가