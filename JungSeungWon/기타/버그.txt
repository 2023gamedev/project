---------------------

* = 보류
// = 해결

---------------------

[일반버그]
1. 좀비를 2번 죽일시 -HP 값 발생 후 시체를 밟고 움직일 수 있는 버그 발생 (레그돌(물리충돌)은 그대로 가능한 상태)
// 2. 아이템 드랍후 다시 주울때 빈 아이템 생성됨
3. 좀비를 타격시 비정상적으로 날라가는 버그
4. 좀비 패스파인딩 버그 (벽을 잘 못 돌아감)
// 5. 첫 점프를 하고 나서 스테미나 회복 X (달리기는 잘 됨)
6. 인벤토리 관련 버그들
	// - 빈화면 오른쪽 클릭시 인벤에 있는 아이템 무작위로 착용/해제 됨
	// - 아이템 드래그해서 버릴때 인벤에 닫혀있는 칸으로 드래그해서 버리면 해당칸 검은색에서 흰색으로 변함 (실제로 빈칸이 되지는 않음)
	- 아이템 드래그해서 버릴때 빈화면에서 움직이면 인벤에 있는 아이템들 무작위로 같이 버려짐
	- 아이템 드래그해서 버릴때 드래그 클릭 풀때 그 위치에서 버려지는게 아니라 드래그를 한 시점의 위치에서 버려짐 
	(그래서 드래그를 하고 윗증으로 가서 버린다해도 아래층에 버려짐)
	- 무기 아이템 착용이 착용 칸에 제대로 표시가 안되는 버그
7. 좀비 되살아나고 사람과 충돌체크가 안되는 버그

---------------------

[아이템 사용 관련 버그들]
// 1. 드링킹 아이템 2번이상 사용시 버그
// 2. 참치캔 사용시 크래쉬
* 3. 드링킹 아이템들 손에 들때 모두 음료수 캔으로 보임
// 4. {?} 출혈 회복용 아이템은 체력이 만땅일때 사용 -> 좀비 한마리 스폰시켜 확인 필요
// 5. 드링킹 아이템을 모두 소진시 다시 3번을 누를 시 크래쉬
6. 아이템 사용도중 아이템 줍기를 하면 애니메이션 캔슬 버그 (이렇게되면 아이템 효과가 바로 시전됨)
// 7. 체력회복 아이템을 한번만 사용했지만 자동으로 두번째로도 사용이 되는 버그 (두번째 이펙트는 그래서 무한 플레이됨 - 실제 회복은 X)
// 8. 체력회복 아이템이 사용되는 도주 강제로 한 번더 사용되어 이펙트가 무한 플레이되는 버그
// 10. 무기를 모두 사용해서 파괴된 후 다시 무기창으로(1번 클릭) 이동할 시에 크래쉬되는 버그 
// 11. 아이템 소진후 다시 해당 아이템 핫키로 이동시 QuickHItem/QuickNWeapon에서 크래쉬 발생
12. 체력 회복 도중 좀비에게 피격 당하면 아이템 사용이 멈추는 버그 
(체력 회복은 멈추고 이펙트는 계속 재생, 프로그래스 바도 정지, 따라서 새로 아이템 사용 X)

+ 체력 회복템도 사용도중 피격시 취소/ 중지를 할지 말지 회의
+ 출혈 아이템도 아이템별 사용시간 변동시킬 지 회의

---------------------

[키 사용]
1. 키 사용 애니메이션 필요
2. 키 사용 (8초) 이후 열쇠 열리도록 수정 필요 - 지금은 사용하면 바로 풀림
3. 키 사용 중 피격시 프로그래스 바도 중지되는 기능 필요 (중지되면 프로그래스 바도 다시 숨겨야함)
4. 키 사용 중 움직이지 못하게 해야함
5. 키로 문을 열고 나서 프로그래스 바 숨겨야함 (일단 바로 게임 오버되긴 하지만...)

---------------------

[AI관련]
// 1. 좀비 패트롤 점이 장애물 안쪽을 찍어서 좀비가 장애물에 끼는 버그
// 2. 목표지점 처음은 잘가지만 두번째 지정해준 목표지점을 주면 움직임이 멈추는 버그
// 3. 클라 좀비 new Rotation FVector{0.f,0.f,0.f}로 잘 설정했지만 해당 Rotation 벡터가 잘못되었다고 언리얼 강제 종료시키는 버그
// 4. 좀비 시야 검사에서 Send Dectect 패킷을 전송할때 좀비의 인덱스가 순차적이지 않다면 vector out of range 크래쉬가 발생
// (예를 들어 1 2 4 5 이런식으로 좀비 인덱스가 설정되면 무조건 크래쉬 발생)
// (인덱스 0번 꼭 사용해야 함 - 그냥 12345 이런식으로 하면 무조건 크래쉬 발생, 근데 01234 이런식으로 하면 해당 크래쉬는 발생 않하지만 
// 5번 문제로 0번 좀비는 작동이 안됨) => (12345 이렇게 했을때 크래쉬 발생시키는 건 5번! [즉, 맨 마지막 인덱스를 할당 받은 좀비, 나머지 좀비는 문제 없는 듯하다])
// 5. 좀비든 플레이어든 0번 인덱스를 설정하면 오류, 작동이 안되는 버그



// 6. 언리얼 에디터에서 플레이 중지를 하면 크래쉬 발생 (서버는 계속 켜진 상태에서) -> 에러 메세지는 정확히 뭔지 모르겠음
// + 마찬가지로 언리얼 에디터에서 플레이를 중지하고 다시 접속을 시도하면 서버-클라(언리얼) 모두 크래쉬 발생
// + 플레이어 두명 접속이 그래서 안됨!!
// -> 서버는 abort(), 클라는 PlayerController.cpp 에서 좀비 위치 갱신해주는 코드에서 NULL 주소 참조 에러 메세지 띄움
// 7. 가끔씩 서버에서 또 vector out of range 크래쉬 발생 -> 크래쉬 메세지 창 뜨고 나서 BT 완전 정지됨
// => [일종의 데이터 레이스 문제] MoveTo에 path 벡터에서 발생하는 문제라서 TimerThread에서 부르던 걸 좀비 BT 쓰레드로 옮기니 문제는 해결 됨
*** 다만, 좀비 BT 작동 인터벌 사이에 MoveTo가 작동을 이제 안하게 되니 path의 중간 노드(방향 전환 하는 지점)에서 경로를 벗어나서 움직임을 계산 할 오류 있으니 해당 오류 수정 필요
// 8. 몇몇 좀비들 어느 순간 부터 움직임이 아예 멈춤 -> 벽이나 장애물에 낀 거 같음 (그 근처에서 멈춤)
// => 이전 A* 버그 그대로 남아 있는 듯 함

9. ZombieSpawnData recv가 지금 안 될때가 있음 (좀비 스폰이 안됨) -> Recv Error 띄움 -> 로그 보면 좀비 이동 위치를 받는데 스폰을 안 시킴, 에러 메세지도 한참뒤에 나옴

10. OneGameModeBase.cpp 에서 네비메쉬 정보 저장하는 코드 남아 있던데 이거 삭제? -> 언리얼 킬때마다 파일 저장 코드 돌아가는 거 같음
-> 일단 주석처리

11. 좀비 많이 스폰시키면 시간이 좀 지나고 어느 순간에 갑자기 언리얼이 플레이 중지됨 (한 8~7분쯤) (크래쉬는 아님) (내 컴퓨터 사양 문제일 수도..)
언리얼 크래쉬도 날 때 있는데 에러 메세지 아래와 같음 (블루 스크린도 떴었음...;;)
=> "LogAudioMixer: Warning: AudioMixerPlatformInterface Timeout [ 5 Seconds] waiting for h/w. InstanceID=1"

12. 좀비끼리 충돌체크 안 되고 있음 -> 뭉쳐짐

13. 좀비가 플레이어를 따라갈 때 플레이어가 이동하면 좀비는 움직임이 멈춤

14. 좀비 아예 맵 밖으로 나가는 버그 있음;;; (화장실 뒤쪽으로 나감)

---------------------

[AI관련 ToDo]
// 1. 좀비 Detect 지금 기능 안되고 있음
// => 기능은 되는 것 같은데, 문제는 플레이어를 포착하고 길을 잘 못찾는 경우가 있어, 플레이어가 가만히 있어도 플레이어를 놓치는 경우가 생김
// 2. 좀비 Attack 하고 결과 반영 => 플레이어 죽으면 다른 플레이어도 해당 플레이어 죽음 확인 
// -> 캐릭터 송수신 패킷에 이미 플레이어 hp 보내고 있고, 언리얼 코드내에서 hp=0 되면 자동으로 죽는 애니메이션 재생시킴
*** 근데 죽는 애니메이션이 잘 안되는 것 같다고 얘기했음 => 확인 필요!
// 3. 서버 좀비 도착지점에 도착하면 도착했다고 로그 쭉 연속으로 찍는거 문제 확인하기 
//	=> SendFinalDesti... 함수가 MoveTo에서 불려서 쓰레드 도는 속도만큼 계속나옴
// 4. 좀비 고개 돌리기
// 5. 서버 좀비BT에서 좀비 로케이션 보내는거 갱신 받기
// 6. 가끔 클라에서 좀비 path 받는 부분에서 NULL 주소 참조 에러 뜸
7. 좀비 죽고 나서는 움직이지 않게 수정 ( + 심지어 공격도 함;;)
// 8. 좀비 공격 중에는 이동 멈추기 구현 - 클라, 서버 둘다 구현해야함
9. 좀비 시야각 만들어 주기
10. 위 [AI관련] 7번 문제에서 MoveTo 함수 수정 필요
11. 좀비 피격 후 좀비 HP 서버-각 클라들 동기화 작업
// 12. 좀비 맵정보 다들 다 따로 Load 하지 말고 (파일 불러오기) 전역 변수 하나 만들어서 거기에서 한번만 로드하고 해당변수 이용하기
13. 좀비 패트롤은 굳이 리소스 많이 사용하는 A* 쓰지 말고 그냥 간단하게 주변 움직이게 바꾸기
14. 좀비 피격시에도 움직임 멈추기
15. 좀비 공격시에 플레이어가 이동하면 이동하는 방향으로 몸 틀기
16. 좀비 걷는 애니메이션 약아악간 끊기는게 보임 -> 보간 필요해보임

[+] 왼쪽 화장실 중앙에 안보이는 벽이 있어서 플레이어 이동 막음;;
